(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{zbXe:function(t,e,s){"use strict";s.r(e),s.d(e,"AssessmentLivePageModule",(function(){return N}));var n=s("ofXK"),o=s("3Pt+"),a=s("TEn/"),i=s("tyNb"),l=s("mrSG"),r=s("cupU"),d=s("etx3"),m=s("HDmY"),c=s("1vjY"),p=s("X7yx"),_=s("5dVO"),u=s("riPR"),b=s("ZJFI"),g=s("UgkZ"),h=s("fXoL");function f(t,e){if(1&t){const t=h.Pb();h.Ob(0,"ion-button",29),h.Wb("click",(function(){h.gc(t);const e=h.Yb().$implicit;return h.Yb().participate(e)})),h.mc(1,"PARTICIPATE"),h.Nb()}}function O(t,e){if(1&t){const t=h.Pb();h.Ob(0,"ion-button",30),h.Wb("click",(function(){h.gc(t);const e=h.Yb().$implicit;return h.Yb().play_attemptted(e)})),h.mc(1,"PREVIEW"),h.Nb()}}function P(t,e){if(1&t){const t=h.Pb();h.Ob(0,"ion-button",31),h.Wb("click",(function(){return h.gc(t),h.Yb(2).pending_message()})),h.mc(1,"IN PROGRESS"),h.Nb()}}function v(t,e){if(1&t){const t=h.Pb();h.Ob(0,"ion-card",4),h.Ob(1,"ion-row",5),h.Ob(2,"ion-col",6),h.Ob(3,"ion-badge",7),h.mc(4),h.Nb(),h.Nb(),h.Nb(),h.Ob(5,"ion-row",5),h.Ob(6,"ion-col",8),h.Ob(7,"p",9),h.mc(8),h.Nb(),h.Nb(),h.Nb(),h.Ob(9,"ion-row",0),h.Ob(10,"ion-col",10),h.Ob(11,"p",11),h.mc(12),h.Nb(),h.Nb(),h.Nb(),h.Ob(13,"ion-row",12),h.Ob(14,"ion-col",13),h.mc(15," Total Time "),h.Nb(),h.Ob(16,"ion-col",14),h.mc(17," Total Questions "),h.Nb(),h.Ob(18,"ion-col",15),h.mc(19," No. of Attempts "),h.Nb(),h.Ob(20,"ion-col",16),h.Ob(21,"span",17),h.mc(22),h.Nb(),h.Nb(),h.Ob(23,"ion-col",18),h.Ob(24,"span",19),h.mc(25),h.Nb(),h.Nb(),h.Ob(26,"ion-col",20),h.Ob(27,"span",21),h.mc(28),h.Nb(),h.Nb(),h.Nb(),h.Ob(29,"ion-row",22),h.Ob(30,"ion-col",23),h.Ob(31,"ion-button",24),h.Wb("click",(function(){h.gc(t);const s=e.$implicit;return h.Yb().read_more(null==s?null:s.read_more)})),h.mc(32,"READ DETAILS"),h.Nb(),h.Nb(),h.Ob(33,"ion-col",25),h.lc(34,f,2,0,"ion-button",26),h.lc(35,O,2,0,"ion-button",27),h.lc(36,P,2,0,"ion-button",28),h.Nb(),h.Nb(),h.Nb()}if(2&t){const t=e.$implicit;h.Ab(4),h.nc(null==t?null:t.is_situation),h.Ab(4),h.nc(null==t?null:t.assessment_name),h.Ab(4),h.oc("Submission Date: ",null==t?null:t.assessment_end_date,""),h.Ab(10),h.oc("\xa0",null==t?null:t.total_time,""),h.Ab(3),h.oc("\xa0",null==t?null:t.total_question,""),h.Ab(3),h.pc("\xa0",null==t?null:t.total_attempts," / ",null==t?null:t.attempts_allowed,""),h.Ab(6),h.bc("ngIf",""==t.assessment_status),h.Ab(1),h.bc("ngIf","ATTEMPTED"==t.assessment_status),h.Ab(1),h.bc("ngIf","PENDING"==t.assessment_status)}}function E(t,e){if(1&t&&(h.Ob(0,"ion-row",32),h.Ob(1,"ion-col",33),h.mc(2),h.Nb(),h.Nb()),2&t){const t=h.Yb();h.Ab(1),h.Cb(t.internet_background),h.Ab(1),h.oc(" ",t.internet_text," ")}}var T=function(t){return t[t.Online=0]="Online",t[t.Offline=1]="Offline",t}({});const w=[{path:"",component:(()=>{class t{constructor(t,e,s,n,o,a,i,l,r,d,m){this.platform=t,this.menu=e,this.modalCtrl=s,this.navCtrl=n,this.zone=o,this.routerOutlet=a,this.events=i,this.ionLoader=l,this.ionAlert=r,this.database=d,this.atom=m,this.btn_isclicked=!1,this.json_profile={user_id:"",company_id:"",company_name:"",first_name:"",last_name:"",fullname:"",email:"",mobile:"",photo:"",co_photo:"",otp_pending:"",otc_pending:"",co_pending:"",token_no:"",payload:"",webauto_login:"",default_dboard_tab:""},this.json_assessment={action:"video_assessment_list_ftp",token_no:"",payload:""},this.json_assessment_details=[],this.vimeo_credentials=[],this.messages=[],this.internet_indicator=!1,this.platform_used="",this.menu.enable(!0),this.initializeApp()}ngOnInit(){}initializeApp(){this.platform.ready().then(t=>{window.addEventListener("online",()=>{this.internetStatus=T.Online,this.zone.run(()=>{this.internet_background="int-green",this.internet_text="YOU ARE ONLINE"}),this.internet_timer=setTimeout(()=>{this.zone.run(()=>{this.internet_indicator=!1})},1e4)}),window.addEventListener("offline",()=>{this.internetStatus=T.Offline,this.zone.run(()=>{this.internet_background="int-red",this.internet_text="YOU ARE OFFLINE",this.internet_indicator=!0})}),this.database.storage_get("device").then(t=>{t.token_no&&t.payload&&(this.json_profile=t,this.json_assessment.payload=t.payload,this.json_assessment.token_no=t.token_no,this.fetch_assessment_list(),this.events.subscribe("refresh_assessment_live",t=>{this.fetch_assessment_list()}))}).catch(t=>{}),this.database.storage_get("useragent").then(t=>{this.platform_used=t}).catch(t=>{})})}ionViewDidLoad(){try{this.events.unsubscribe("loginnetwork:online"),this.events.unsubscribe("loginnetwork:offline"),clearTimeout(this.internet_timer)}catch(t){}}execute_assement(t,e){let s=0,n=0,o=0,a=[];a.total_uploaded=0,a.total_attempted=0,a.assessment_question_count=0;let i=Promise.resolve();return Object.keys(t).forEach(l=>{i=i.then(()=>new Promise(i=>{if(parseFloat(t[l].user_id)==parseFloat(this.json_profile.user_id)){let r=t[l].is_uploaded;t[l].assessment_id===e&&("1"==r&&(s++,a.total_uploaded=s),"0"==r&&(n++,a.total_attempted=n),o++,a.assessment_question_count=o,i(a))}}))}),Promise.all([i]).then((function(t){return t[0]}))}fetch_assessment_list(){return Object(l.a)(this,void 0,void 0,(function*(){let t=this;""==this.json_assessment.token_no||""==this.json_assessment.payload?this.atom.presentToast("Offline API Token missing."):yield this.atom.http_post(this.json_assessment).subscribe(e=>Object(l.a)(this,void 0,void 0,(function*(){if(this.messages.LOCK_RECORDING_BUTTON_PERIOD=e.LOCK_RECORDING_BUTTON_PERIOD,this.messages.NO_RECORD_FOUND=e.NO_RECORD_FOUND,this.messages.INTERNET_DISCONNECTED=e.INTERNET_DISCONNECTED,this.messages.INTERNET_HARDWARE_DISCONNECTED=e.INTERNET_HARDWARE_DISCONNECTED,this.messages.VIMEO_TRANSCODING_STUCK=e.VIMEO_TRANSCODING_STUCK,this.messages.VIMEO_CALLBACK_ATTEMPTS=e.VIMEO_CALLBACK_ATTEMPTS,this.messages.VIMEO_CALLBACK_TIMER=e.VIMEO_CALLBACK_TIMER,this.messages.PBWRAPPER_BG=e.PBWRAPPER_BG,this.messages.PBFONT_CLR=e.PBFONT_CLR,this.messages.PBU_BG=e.PBU_BG,this.messages.PBC_BG=e.PBC_BG,this.messages.PBF_BG=e.PBF_BG,this.messages.PBS_BG=e.PBS_BG,this.messages.UPLOAD_POPUP_TITLE=e.UPLOAD_POPUP_TITLE,this.messages.UPLOAD_POPUP_MESSAGE_HEAD=e.UPLOAD_POPUP_MESSAGE_HEAD,this.messages.UPLOAD_POPUP_MESSAGE_SUB=e.UPLOAD_POPUP_MESSAGE_SUB,this.messages.PENDING_POPUP_TITLE=e.PENDING_POPUP_TITLE,this.messages.PENDING_POPUP_MESSAGE_HEAD=e.PENDING_POPUP_MESSAGE_HEAD,this.messages.PENDING_POPUP_MESSAGE_SUB=e.PENDING_POPUP_MESSAGE_SUB,this.atom.set_assessment_message(this.messages),1==e.success){let s=Promise.resolve();for(let t=0;t<Object.keys(e.data).length;t++)s=s.then(()=>new Promise((s,n)=>{let o=e.data[t].assessment_id;if(e.data[t].assessment_status="","1"!=e.data[t].is_completed&&1!=e.data[t].is_completed||"0"!=e.data[t].ftpto_vimeo_uploaded&&0!=e.data[t].ftpto_vimeo_uploaded)if(parseFloat(e.data[t].attempts_allowed)==parseFloat(e.data[t].total_attempts))e.data[t].assessment_status="ATTEMPTED",s();else{let n=0,a=0,i=0;this.database.storage_get("assessment").then(s=>Object(l.a)(this,void 0,void 0,(function*(){if(s&&Object.keys(s).length>0){const l=yield this.execute_assement(s,o);n=l.assessment_question_count,a=l.total_uploaded,i=l.total_attempted,n>0?e.data[t].assessment_status="ATTEMPTED":(parseFloat(e.data[t].video_uploaded_count)==parseFloat(e.data[t].total_question)&&parseFloat(e.data[t].video_uploaded_count_ftp)==parseFloat(e.data[t].total_question)&&("0"!=e.data[t].is_completed&&0!=e.data[t].is_completed||"0"!=e.data[t].ftpto_vimeo_uploaded&&0!=e.data[t].ftpto_vimeo_uploaded||(e.data[t].assessment_status="ATTEMPTED")),parseFloat(e.data[t].video_uploaded_count)>0&&("0"!=e.data[t].is_completed&&0!=e.data[t].is_completed||"0"!=e.data[t].ftpto_vimeo_uploaded&&0!=e.data[t].ftpto_vimeo_uploaded||(e.data[t].assessment_status="ATTEMPTED")))}else parseFloat(e.data[t].video_uploaded_count)==parseFloat(e.data[t].total_question)&&parseFloat(e.data[t].video_uploaded_count_ftp)==parseFloat(e.data[t].total_question)&&("0"!=e.data[t].is_completed&&0!=e.data[t].is_completed||"0"!=e.data[t].ftpto_vimeo_uploaded&&0!=e.data[t].ftpto_vimeo_uploaded||(e.data[t].assessment_status="ATTEMPTED")),parseFloat(e.data[t].video_uploaded_count)>0&&("0"!=e.data[t].is_completed&&0!=e.data[t].is_completed||"0"!=e.data[t].ftpto_vimeo_uploaded&&0!=e.data[t].ftpto_vimeo_uploaded||(e.data[t].assessment_status="ATTEMPTED"))}))).catch(t=>{}),a>0?(e.data[t].video_uploaded_count=a,s()):s()}else e.data[t].assessment_status="PENDING",s()}));Promise.all([s]).then((function(s){t.json_assessment_details=e.data,t.vimeo_credentials=e.vimeo_credentials}))}})),t=>{},()=>{})}))}open_demo_instruction(){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:g.a,componentProps:{},swipeToClose:!0,presentingElement:yield this.modalCtrl.getTop()});yield t.present();const{data:e}=yield t.onWillDismiss();e&&"Y"===e.assessment_indicator&&this.navCtrl.navigateRoot("/assessment-demo-quiz")}))}participate(t){return Object(l.a)(this,void 0,void 0,(function*(){if("1"===t.otp_verified||1===t.otp_verified)if(0===t.is_completed||"0"===t.is_completed)if(parseInt(t.total_attempts)<parseInt(t.attempts_allowed)){const e=yield this.modalCtrl.create({component:d.a,componentProps:{assessment_data:t.instruction},swipeToClose:!0,presentingElement:yield this.modalCtrl.getTop()});yield e.present();const{data:s}=yield e.onWillDismiss();if(s){let e=s.assessment_indicator;"Y"===e?this.atom.navigation_param_set({assessment_detail:t,vimeo_credentials:this.vimeo_credentials}).subscribe(t=>{this.navCtrl.navigateRoot("ios"==this.platform_used?"/assessment-quiz":"/assessment-diagnostics")},t=>{this.atom.presentToast("Application error, parameter failed to set.")}):"DEMO"===e&&this.open_demo_instruction()}}else this.atom.presentToast("Awarathon, Your maximum attempt limit completed.");else this.atom.presentToast("Awarathon, Assessment completed.");else this.atom.navigation_param_set(t).subscribe(t=>{this.navCtrl.navigateRoot("/assessment-otc")},t=>{this.atom.presentToast("Application error, parameter failed to set.")})}))}read_more(t){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:r.a,componentProps:{assessment_data:t},swipeToClose:!0,presentingElement:yield this.modalCtrl.getTop()});return yield e.present()}))}play_attemptted(t){return Object(l.a)(this,void 0,void 0,(function*(){if("1"===t.otp_verified||1===t.otp_verified)if(0===t.is_completed||"0"===t.is_completed)if(parseInt(t.total_attempts)<parseInt(t.attempts_allowed))this.atom.navigation_param_set({assessment_detail:t,vimeo_credentials:this.vimeo_credentials}).subscribe(t=>{this.navCtrl.navigateRoot("ios"==this.platform_used?"/assessment-quiz":"/assessment-diagnostics")},t=>{this.atom.presentToast("Application error, parameter failed to set.")});else{let e=0;this.database.storage_get("assessment").then(s=>Object(l.a)(this,void 0,void 0,(function*(){s&&Object.keys(s).length>0?(yield Object.keys(s).forEach(n=>Object(l.a)(this,void 0,void 0,(function*(){parseFloat(s[n].user_id)==parseFloat(this.json_profile.user_id)&&(yield s[n].assessment_id)===t.assessment_id&&e++}))),parseInt(t.total_question)===e?this.atom.navigation_param_set({param_assessment_detail:t,param_vimeo_credentials:this.vimeo_credentials,param_total_attempts:t.total_attempts,param_attempts_allowed:t.attempts_allowed}).subscribe(t=>{this.navCtrl.navigateRoot("/assessment-preview")},t=>{this.atom.presentToast("Application error, parameter failed to set.")}):this.ionAlert.show_alert("Awarathon","You have made "+t.total_attempts+" successful attempts for assessment. The maximum attempts allowed for this assessment are "+t.attempts_allowed)):this.ionAlert.show_alert("Awarathon","You have made "+t.total_attempts+" successful attempts for assessment. OR You are trying to play assessment on another device that has not stored your previous attempts. The maximum attempts allowed for this assessment are "+t.attempts_allowed)}))).catch(e=>{this.ionAlert.show_alert("Awarathon","You have made "+t.total_attempts+" successful attempts for assessment. OR You are trying to play assessment on another device that has not stored your previous attempts. The maximum attempts allowed for this assessment are "+t.attempts_allowed)})}else this.atom.presentToast("Awarathon, Assessment completed.");else this.atom.navigation_param_set(t).subscribe(t=>{this.navCtrl.navigateRoot("/assessment-otc")},t=>{this.atom.presentToast("Application error, parameter failed to set.")})}))}pending_message(){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalCtrl.create({component:m.a,componentProps:{popup_type:"PENDING"},swipeToClose:!0,presentingElement:yield this.modalCtrl.getTop()});yield t.present(),yield t.onWillDismiss()}))}}return t.\u0275fac=function(e){return new(e||t)(h.Lb(a.T),h.Lb(a.Q),h.Lb(a.R),h.Lb(a.S),h.Lb(h.z),h.Lb(a.A),h.Lb(u.a),h.Lb(_.a),h.Lb(p.a),h.Lb(b.a),h.Lb(c.a))},t.\u0275cmp=h.Fb({type:t,selectors:[["app-assessment-live"]],decls:6,vars:2,consts:[[1,"ion-no-margin","ion-no-padding"],["size","12","class","assessment-container",4,"ngFor","ngForOf"],["position","bottom",1,"ion-no-margin","ion-no-padding","ion-no-border","ion-no-shadow","internet-bottom-margin"],["class","ion-no-margin ion-no-padding","internet-container","",4,"ngIf"],["size","12",1,"assessment-container"],[1,"ion-no-margin","ion-no-padding","container-row"],["size","12",1,"badge-container"],["color","secondary",1,"assessment-badge-purple"],["size","12",1,"ion-no-margin","ion-no-padding"],[1,"assessment-title"],["size","12",1,"ion-no-margin","ion-no-padding","container-row"],[1,"assessment-subtitle"],[1,"ion-no-margin","ion-no-padding","top-mar-8","stat-white-box"],["size","4",1,"ion-no-margin","ion-no-padding","left-title"],["size","4",1,"ion-no-margin","ion-no-padding","middle-title"],["size","4",1,"ion-no-margin","ion-no-padding","right-title"],["size","4",1,"ion-no-margin","left-value"],[1,"left-value-span"],["size","4",1,"ion-no-margin","middle-value"],[1,"middle-value-span"],["size","4",1,"ion-no-margin","right-value"],[1,"right-value-span"],[1,"ion-no-margin","ion-no-padding","bottom-panel"],["size","4",1,"ion-no-margin","ion-no-padding"],["size","small","fill","solid","expand","block",1,"read-details-button",3,"click"],["size","8",1,"ion-no-margin","ion-no-padding"],["size","small","fill","solid","expand","block","class","participate-button",3,"click",4,"ngIf"],["size","small","fill","solid","expand","block","class","preview-button",3,"click",4,"ngIf"],["size","small","fill","solid","expand","block","class","inprogress-button",3,"click",4,"ngIf"],["size","small","fill","solid","expand","block",1,"participate-button",3,"click"],["size","small","fill","solid","expand","block",1,"preview-button",3,"click"],["size","small","fill","solid","expand","block",1,"inprogress-button",3,"click"],["internet-container","",1,"ion-no-margin","ion-no-padding"],["size","12","no-padding","","no-margin","","internet-container",""]],template:function(t,e){1&t&&(h.Ob(0,"ion-content"),h.Ob(1,"ion-list",0),h.lc(2,v,37,10,"ion-card",1),h.Nb(),h.Nb(),h.Ob(3,"ion-footer",2),h.Ob(4,"ion-grid",0),h.lc(5,E,3,3,"ion-row",3),h.Nb(),h.Nb()),2&t&&(h.Ab(2),h.bc("ngForOf",e.json_assessment_details),h.Ab(3),h.bc("ngIf",e.internet_indicator))},directives:[a.m,a.w,n.h,a.o,a.p,n.i,a.j,a.B,a.l,a.g,a.h],styles:["ion-card[_ngcontent-%COMP%]:last-child{margin-bottom:260px!important}.assessment-container[_ngcontent-%COMP%]{padding:0!important;margin:5px 0 0!important;height:260px;background-color:#fff;box-shadow:none;border-radius:0;border-width:0}.container-row[_ngcontent-%COMP%]{padding:5px 0 0 10px!important;width:99%}.assessment-badge-red[_ngcontent-%COMP%]{padding:4px 10px 3px!important;background-color:#ff866e;font-size:1.1rem;font-weight:600}.assessment-badge-green[_ngcontent-%COMP%]{background-color:#28c0a7}.assessment-badge-green[_ngcontent-%COMP%], .assessment-badge-purple[_ngcontent-%COMP%]{padding:4px 10px 3px!important;font-size:1rem;font-weight:400}.assessment-badge-purple[_ngcontent-%COMP%]{background-color:#54419a}.badge-container[_ngcontent-%COMP%]{padding:0!important;margin:0!important;text-align:left}.assessment-title[_ngcontent-%COMP%]{text-align:left;font-size:1.8rem;font-weight:600;color:#2f2f2f;line-height:2rem}.assessment-subtitle[_ngcontent-%COMP%]{text-align:left;font-size:1.2rem;font-weight:400;color:#686868}.stat-white-box[_ngcontent-%COMP%]{padding:0!important;background-color:#f8f8f8;height:80px;border-radius:0;box-shadow:none}.left-title[_ngcontent-%COMP%], .middle-title[_ngcontent-%COMP%], .right-title[_ngcontent-%COMP%]{text-align:left;font-size:1.4rem;font-weight:600;color:#909090;padding:10px 0 0 10px!important}.left-value[_ngcontent-%COMP%]{color:#24c3a7}.left-value[_ngcontent-%COMP%], .middle-value[_ngcontent-%COMP%]{text-align:left;font-size:3.5rem;font-weight:600;padding:0 0 0 10px!important}.middle-value[_ngcontent-%COMP%]{color:#de4f41}.right-value[_ngcontent-%COMP%]{text-align:left;font-size:3.5rem;font-weight:600;color:#1e1a55;padding:0 0 0 10px!important}.left-value-span[_ngcontent-%COMP%]{color:#54419a}.left-value-span[_ngcontent-%COMP%], .middle-value-span[_ngcontent-%COMP%]{text-align:left;font-size:2rem;font-weight:600}.middle-value-span[_ngcontent-%COMP%]{color:#3c4d6b}.right-value-span[_ngcontent-%COMP%]{text-align:left;font-size:2rem;font-weight:600;color:#1e1a55}.bottom-panel[_ngcontent-%COMP%]{padding:0!important;height:35px;background-color:#eeeced}.read-more[_ngcontent-%COMP%]{text-align:left;font-size:1.4rem;font-weight:600}.read-more-div[_ngcontent-%COMP%]{width:300px}.read-more-span[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;padding-bottom:2px;border-bottom:1px solid #787878;line-height:40px;height:40px}.participate-button[_ngcontent-%COMP%]{--background:var(--ion-color-primary);--background-focused:var(--ion-color-primary);--background-hover:var(--ion-color-primary)}.participate-button[_ngcontent-%COMP%], .read-details-button[_ngcontent-%COMP%]{width:100%;height:35px;font-family:Roboto,sans-serif;font-size:1.4rem;font-weight:400;text-transform:none;--box-shadow:none;--border-radius:0px;--color:var(--ion-color-primary-contrast);margin:0}.read-details-button[_ngcontent-%COMP%]{--background:var(--ion-color-medium);--background-focused:var(--ion-color-medium);--background-hover:var(--ion-color-medium)}.inprogress-button[_ngcontent-%COMP%], .preview-button[_ngcontent-%COMP%]{width:100%;height:35px;font-family:Roboto,sans-serif;font-size:1.4rem;font-weight:400;text-transform:none;--box-shadow:none;--border-radius:0px;--background:var(--ion-color-yellow);--background-focused:var(--ion-color-yellow);--background-hover:var(--ion-color-yellow);--color:var(--ion-color-yellow-contrast);margin:0}"]}),t})()}];let C=(()=>{class t{}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(e){return new(e||t)},imports:[[i.i.forChild(w)],i.i]}),t})(),N=(()=>{class t{}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(e){return new(e||t)},imports:[[n.b,o.f,a.N,C]]}),t})()}}]);