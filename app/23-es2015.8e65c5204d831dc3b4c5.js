(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{GBY4:function(t,e,s){"use strict";var n=s("RA0T"),o=s("nFlj"),i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,r=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function l(t){return(t||"").toString().replace(a,"")}var u=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function d(t){var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var s,n={},o=typeof(t=t||e.location||{});if("blob:"===t.protocol)n=new _(unescape(t.pathname),{});else if("string"===o)for(s in n=new _(t,{}),c)delete n[s];else if("object"===o){for(s in t)s in c||(n[s]=t[s]);void 0===n.slashes&&(n.slashes=i.test(t.href))}return n}function h(t){t=l(t);var e=r.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function _(t,e,s){if(t=l(t),!(this instanceof _))return new _(t,e,s);var i,r,a,c,p,f,m=u.slice(),b=typeof e,g=this,v=0;for("object"!==b&&"string"!==b&&(s=e,e=null),s&&"function"!=typeof s&&(s=o.parse),e=d(e),i=!(r=h(t||"")).protocol&&!r.slashes,g.slashes=r.slashes||i&&e.slashes,g.protocol=r.protocol||e.protocol||"",t=r.rest,r.slashes||(m[3]=[/(.*)/,"pathname"]);v<m.length;v++)"function"!=typeof(c=m[v])?(f=c[1],(a=c[0])!=a?g[f]=t:"string"==typeof a?~(p=t.indexOf(a))&&("number"==typeof c[2]?(g[f]=t.slice(0,p),t=t.slice(p+c[2])):(g[f]=t.slice(p),t=t.slice(0,p))):(p=a.exec(t))&&(g[f]=p[1],t=t.slice(0,p.index)),g[f]=g[f]||i&&c[3]&&e[f]||"",c[4]&&(g[f]=g[f].toLowerCase())):t=c(t);s&&(g.query=s(g.query)),i&&e.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==e.pathname)&&(g.pathname=function(t,e){if(""===t)return e;for(var s=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=s.length,o=s[n-1],i=!1,r=0;n--;)"."===s[n]?s.splice(n,1):".."===s[n]?(s.splice(n,1),r++):r&&(0===n&&(i=!0),s.splice(n,1),r--);return i&&s.unshift(""),"."!==o&&".."!==o||s.push(""),s.join("/")}(g.pathname,e.pathname)),n(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(c=g.auth.split(":"),g.username=c[0]||"",g.password=c[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}_.prototype={set:function(t,e,s){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(s||o.parse)(e)),i[t]=e;break;case"port":i[t]=e,n(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,/:\d+$/.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!s;break;case"pathname":case"hash":if(e){var r="pathname"===t?"/":"#";i[t]=e.charAt(0)!==r?r+e:e}else i[t]=e;break;default:i[t]=e}for(var a=0;a<u.length;a++){var l=u[a];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.origin=i.protocol&&i.host&&"file:"!==i.protocol?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=o.stringify);var e,s=this,n=s.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var i=n+(s.slashes?"//":"");return s.username&&(i+=s.username,s.password&&(i+=":"+s.password),i+="@"),i+=s.host+s.pathname,(e="object"==typeof s.query?t(s.query):s.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),s.hash&&(i+=s.hash),i}},_.extractProtocol=h,_.location=d,_.trimLeft=l,_.qs=o,t.exports=_},J66h:function(t,e,s){var n;!function(s,o){t.exports=function(s){"use strict";var o,i=(s=s||{}).Base64,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){for(var e={},s=0,n=t.length;s<n;s++)e[t.charAt(s)]=s;return e}(r),l=String.fromCharCode,u=function(t){if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?l(192|e>>>6)+l(128|63&e):l(224|e>>>12&15)+l(128|e>>>6&63)+l(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return l(240|e>>>18&7)+l(128|e>>>12&63)+l(128|e>>>6&63)+l(128|63&e)},c=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(t){return t.replace(c,u)},h=function(t){var e=[0,2,1][t.length%3],s=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[r.charAt(s>>>18),r.charAt(s>>>12&63),e>=2?"=":r.charAt(s>>>6&63),e>=1?"=":r.charAt(63&s)].join("")},_=s.btoa&&"function"==typeof s.btoa?function(t){return s.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,h)},p=function(t){return _(d(String(t)))},f=function(t){return t.replace(/[+\/]/g,(function(t){return"+"==t?"-":"_"})).replace(/=/g,"")},m=function(t,e){return e?f(p(t)):p(t)};s.Uint8Array&&(o=function(t,e){for(var s="",n=0,o=t.length;n<o;n+=3){var i=t[n+1],a=t[n+2],l=t[n]<<16|i<<8|a;s+=r.charAt(l>>>18)+r.charAt(l>>>12&63)+(void 0!==i?r.charAt(l>>>6&63):"=")+(void 0!==a?r.charAt(63&l):"=")}return e?f(s):s});var b,g=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return l(55296+(e>>>10))+l(56320+(1023&e));case 3:return l((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return l((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},y=function(t){return t.replace(g,v)},O=function(t){var e=t.length,s=e%4,n=(e>0?a[t.charAt(0)]<<18:0)|(e>1?a[t.charAt(1)]<<12:0)|(e>2?a[t.charAt(2)]<<6:0)|(e>3?a[t.charAt(3)]:0),o=[l(n>>>16),l(n>>>8&255),l(255&n)];return o.length-=[0,0,2,1][s],o.join("")},w=s.atob&&"function"==typeof s.atob?function(t){return s.atob(t)}:function(t){return t.replace(/\S{1,4}/g,O)},R=function(t){return w(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},P=function(t){return String(t).replace(/[-_]/g,(function(t){return"-"==t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},x=function(t){return function(t){return y(w(t))}(P(t))};if(s.Uint8Array&&(b=function(t){return Uint8Array.from(R(P(t)),(function(t){return t.charCodeAt(0)}))}),s.Base64={VERSION:"2.6.4",atob:R,btoa:_,fromBase64:x,toBase64:m,utob:d,encode:m,encodeURI:function(t){return m(t,!0)},btou:y,decode:x,noConflict:function(){var t=s.Base64;return s.Base64=i,t},fromUint8Array:o,toUint8Array:b},"function"==typeof Object.defineProperty){var k=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};s.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",k((function(){return x(this)}))),Object.defineProperty(String.prototype,"toBase64",k((function(t){return m(this,t)}))),Object.defineProperty(String.prototype,"toBase64URI",k((function(){return m(this,!0)})))}}return s.Meteor&&(Base64=s.Base64),t.exports?t.exports.Base64=s.Base64:void 0===(n=(function(){return s.Base64}).apply(e,[]))||(t.exports=n),{Base64:s.Base64}}(s)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this)},RA0T:function(t,e,s){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},nFlj:function(t,e,s){"use strict";var n=Object.prototype.hasOwnProperty;function o(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}e.stringify=function(t,e){e=e||"";var s,o,i=[];for(o in"string"!=typeof e&&(e="?"),t)if(n.call(t,o)){if((s=t[o])||null!=s&&!isNaN(s)||(s=""),o=encodeURIComponent(o),s=encodeURIComponent(s),null===o||null===s)continue;i.push(o+"="+s)}return i.length?e+i.join("&"):""},e.parse=function(t){for(var e,s=/([^=?&]+)=?([^&]*)/g,n={};e=s.exec(t);){var i=o(e[1]),r=o(e[2]);null===i||null===r||i in n||(n[i]=r)}return n}},tqhi:function(t,e,s){"use strict";s.r(e),s.d(e,"AssessmentPreviewPageModule",(function(){return It}));var n=s("ofXK"),o=s("3Pt+"),i=s("TEn/"),r=s("tyNb"),a=s("mrSG"),l=s("tk/3"),u=s("FAH8"),c=s("B7Rs");function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){var e="function"==typeof Map?new Map:void 0;return(p=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,s)}function s(){return f(t,arguments,g(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),b(s,t)})(t)}function f(t,e,s){return(f=m()?Reflect.construct:function(t,e,s){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return s&&b(o,s.prototype),o}).apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(n,t);var e,s=(e=n,function(){var t,s=g(e);if(m()){var n=g(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return _(this,t)});function n(t){var e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(h(this,n),(e=s.call(this,t)).originalRequest=i,e.originalResponse=r,e.causingError=o,null!=o&&(t+=", caused by ".concat(o.toString())),null!=i){var a=i.getHeader("X-Request-ID")||"n/a",l=i.getMethod(),u=i.getURL(),c=r?r.getStatus():"n/a",d=r?r.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(u,", response code: ").concat(c,", response text: ").concat(d,", request id: ").concat(a,")")}return e.message=t,e}return n}(p(Error)),y=s("J66h"),O=s("GBY4"),w=s.n(O);function R(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function P(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?R(Object(s),!0).forEach((function(e){x(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):R(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function x(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function k(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var E=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"resume"in s&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=s,this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var e,s,n;return e=t,n=[{key:"terminate",value:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if("function"==typeof s||"function"==typeof n)throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");var o=U("DELETE",e,s),i=o.send();return i.then((function(t){if(204!==t.getStatus())throw new v("tus: unexpected response while terminating upload",null,o,t)})).catch((function(n){if(n instanceof v||(n=new v("tus: failed to terminate upload",n,o,null)),!A(n,0,s))throw n;var i=s.retryDelays[0],r=s.retryDelays.slice(1),a=P({},s,{retryDelays:r});return new Promise((function(t){return setTimeout(t,i)})).then((function(){return t.terminate(e,a)}))}))}}],(s=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then((function(e){return t._urlStorage.findUploadsByFingerprint(e)}))}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint||this.options.uploadUrl){var s=this.options.retryDelays;null==s||"[object Array]"===Object.prototype.toString.call(s)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(e){t.options[e]&&t._emitError(new Error("tus: cannot use the ".concat(e," option when parallelUploads is enabled")))})),this.options.fingerprint(e,this.options).then((function(s){return null==s||"Calculated fingerprint: ".concat(s),t._fingerprint=s,t._source?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)})).then((function(e){t._source=e,t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()})).catch((function(e){t._emitError(e)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var e=this,s=this._size=this._source.size,n=0;this._parallelUploads=[];var o=function(t,e,s){for(var n=Math.floor(t/e),o=[],i=0;i<e;i++)o.push({start:n*i,end:n*(i+1)});return o[e-1].end=t,s&&o.forEach((function(t,e){t.uploadUrl=s[e]||null})),o}(this._source.size,null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,this._parallelUploadUrls);this._parallelUploadUrls=new Array(o.length);var i,r=o.map((function(i,r){var a=0;return e._source.slice(i.start,i.end).then((function(l){var u=l.value;return new Promise((function(l,c){var d=P({},e.options,{uploadUrl:i.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:P({},e.options.headers,{"Upload-Concat":"partial"}),onSuccess:l,onError:c,onProgress:function(t){n=n-a+t,a=t,e._emitProgress(n,s)},_onUploadUrlAvailable:function(){e._parallelUploadUrls[r]=h.url,e._parallelUploadUrls.filter((function(t){return!!t})).length===o.length&&e._saveUploadInUrlStorage()}}),h=new t(u,d);h.start(),e._parallelUploads.push(h)}))}))}));Promise.all(r).then((function(){(i=e._openRequest("POST",e.options.endpoint)).setHeader("Upload-Concat","final;".concat(e._parallelUploadUrls.join(" ")));var t=C(e.options.metadata);return""!==t&&i.setHeader("Upload-Metadata",t),e._sendRequest(i,null)})).then((function(t){if(S(t.getStatus(),200)){var s=t.getHeader("Location");null!=s?(e.url=z(e.options.endpoint,s),"Created upload at ".concat(e.url),e._emitSuccess()):e._emitHttpError(i,t,"tus: invalid or missing Location header")}else e._emitHttpError(i,t,"tus: unexpected response while creating upload")})).catch((function(t){e._emitError(t)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input and must be specified manually using the `uploadSize` option"));return this._aborted=!1,null!=this.url?("Resuming upload from previous URL: ".concat(this.url),void this._resumeUpload()):null!=this.options.uploadUrl?("Resuming upload from provided URL: ".concat(this.options.url),this.url=this.options.uploadUrl,void this._resumeUpload()):void this._createUpload()}},{key:"abort",value:function(e,s){var n=this;if("function"==typeof s)throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(t){t.abort(e)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?t.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,s,n){this._emitError(new v(s,n,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),A(t,this._retryAttempt,this.options))){var s=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){e.start()}),s))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,s){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,s)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var e=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?e.setHeader("Upload-Defer-Length",1):e.setHeader("Upload-Length",this._size);var s,n=C(this.options.metadata);""!==n&&e.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,s=this._addChunkToRequest(e)):s=this._sendRequest(e,null),s.then((function(s){if(S(s.getStatus(),200)){var n=s.getHeader("Location");if(null!=n){if(t.url=z(t.options.endpoint,n),"Created upload at ".concat(t.url),"function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),0===t._size)return t._emitSuccess(),void t._source.close();t._saveUploadInUrlStorage(),t.options.uploadDataDuringCreation?t._handleUploadResponse(e,s):(t._offset=0,t._performUpload())}else t._emitHttpError(e,s,"tus: invalid or missing Location header")}else t._emitHttpError(e,s,"tus: unexpected response while creating upload")})).catch((function(s){t._emitHttpError(e,null,"tus: failed to create upload",s)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then((function(s){var n=s.getStatus();if(!S(n,200))return S(n,400)&&t._removeFromUrlStorage(),423===n?void t._emitHttpError(e,s,"tus: upload is currently locked; retry later"):t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(e,s,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var o=parseInt(s.getHeader("Upload-Offset"),10);if(isNaN(o))t._emitHttpError(e,s,"tus: invalid or missing offset value");else{var i=parseInt(s.getHeader("Upload-Length"),10);if(!isNaN(i)||t.options.uploadLengthDeferred){if("function"==typeof t.options._onUploadUrlAvailable&&t.options._onUploadUrlAvailable(),o===i)return t._emitProgress(i,i),void t._emitSuccess();t._offset=o,t._performUpload()}else t._emitHttpError(e,s,"tus: invalid or missing length value")}})).catch((function(s){t._emitHttpError(e,null,"tus: failed to resume upload",s)}))}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then((function(s){S(s.getStatus(),200)?e._handleUploadResponse(t,s):e._emitHttpError(t,s,"tus: unexpected response while uploading chunk")})).catch((function(s){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset "+e._offset,s)})))}},{key:"_addChunkToRequest",value:function(t){var e=this,s=this._offset,n=this._offset+this.options.chunkSize;return t.setProgressHandler((function(t){e._emitProgress(s+t,e._size)})),t.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(s,n).then((function(s){var n=s.value;return e.options.uploadLengthDeferred&&s.done&&(e._size=e._offset+(n&&n.size?n.size:0),t.setHeader("Upload-Length",e._size)),null===n?e._sendRequest(t):(e._emitProgress(e._offset,e._size),e._sendRequest(t,n))}))}},{key:"_handleUploadResponse",value:function(t,e){var s=parseInt(e.getHeader("Upload-Offset"),10);if(isNaN(s))this._emitHttpError(t,e,"tus: invalid or missing offset value");else{if(this._emitProgress(s,this._size),this._emitChunkComplete(s-this._offset,s,this._size),this._offset=s,s==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(t,e){var s=U(t,e,this.options);return this._req=s,s}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(e){t._emitError(e)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var e={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then((function(e){return t._urlStorageKey=e})).catch((function(e){t._emitError(e)}))}}},{key:"_sendRequest",value:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"function"==typeof this.options.onBeforeRequest&&this.options.onBeforeRequest(t),t.send(s).then((function(s){return"function"==typeof e.options.onAfterResponse&&e.options.onAfterResponse(t,s),s}))}}])&&k(e.prototype,s),n&&k(e,n),t}();function C(t){var e=[];for(var s in t)e.push(s+" "+y.Base64.encode(t[s]));return e.join(",")}function S(t,e){return t>=e&&t<e+100}function U(t,e,s){var n=s.httpStack.createRequest(t,e);n.setHeader("Tus-Resumable","1.0.0");var o=s.headers||{};for(var i in o)n.setHeader(i,o[i]);if(s.addRequestId){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}));n.setHeader("X-Request-ID",r)}return n}function A(t,e,s){var n,o=t.originalResponse?t.originalResponse.getStatus():0,i=!S(o,400)||409===o||423===o;return null!=s.retryDelays&&e<s.retryDelays.length&&null!=t.originalRequest&&i&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function z(t,e){return new w.a(e,t).toString()}E.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};var j=E;var D=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}])&&function(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();var N=!1;try{N="localStorage"in window,localStorage.setItem("tusSupport",localStorage.getItem("tusSupport"))}catch(Ft){if(Ft.code!==Ft.SECURITY_ERR&&Ft.code!==Ft.QUOTA_EXCEEDED_ERR)throw Ft;N=!1}var M=N,T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var e=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(e)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var s=Math.round(1e12*Math.random()),n="tus::".concat(t,"::").concat(s);return localStorage.setItem(n,JSON.stringify(e)),Promise.resolve(n)}},{key:"_findEntries",value:function(t){for(var e=[],s=0;s<localStorage.length;s++){var n=localStorage.key(s);if(0===n.indexOf(t))try{var o=JSON.parse(localStorage.getItem(n));o.urlStorageKey=n,e.push(o)}catch(Ft){}}return e}}])&&function(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(t.prototype,e),t}();function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function F(t,e,s){return e&&I(t.prototype,e),s&&I(t,s),t}var L=function(){function t(){B(this,t)}return F(t,[{key:"createRequest",value:function(t,e){return new q(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),q=function(){function t(e,s){B(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,s,!0),this._method=e,this._url=s,this._headers={}}return F(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(s,n){t._xhr.onload=function(){s(new H(t._xhr))},t._xhr.onerror=function(t){n(t)},t._xhr.send(e)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),H=function(){function t(e){B(this,t),this._xhr=e}return F(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),Y=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function V(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function K(t,e,s){return e&&V(t.prototype,e),s&&V(t,s),t}var W=function(){function t(e){G(this,t),this._file=e,this.size=e.size}return K(t,[{key:"slice",value:function(t,e){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova))return s=this._file.slice(t,e),new Promise((function(t,e){var n=new FileReader;n.onload=function(){var e=new Uint8Array(n.result);t({value:e})},n.onerror=function(t){e(t)},n.readAsArrayBuffer(s)}));var s,n=this._file.slice(t,e);return Promise.resolve({value:n})}},{key:"close",value:function(){}}]),t}(),$=function(){function t(e,s){G(this,t),this._chunkSize=s,this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}return K(t,[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var s=this,n=e<=this._bufferOffset+J(this._buffer);if(this._done||n){var o=this._getDataFromBuffer(t,e);return Promise.resolve({value:o,done:null==o&&this._done})}return this._reader.read().then((function(n){var o=n.value;return n.done?s._done=!0:s._buffer=void 0===s._buffer?o:function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var s=new t.constructor(t.length+e.length);return s.set(t),s.set(e,t.length),s}throw new Error("Unknown data type")}(s._buffer,o),s._readUntilEnoughDataOrDone(t,e)}))}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var s=0===J(this._buffer);return this._done&&s?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}]),t}();function J(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var X=function(){function t(){G(this,t)}return K(t,[{key:"openFile",value:function(t,e){return Y()&&t&&void 0!==t.uri?(s=t.uri,new Promise((function(t,e){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){t(n.response)},n.onerror=function(t){e(t)},n.open("GET",s),n.send()}))).then((function(t){return new W(t)})).catch((function(t){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. "+t)})):"function"==typeof t.slice&&void 0!==t.size?Promise.resolve(new W(t)):"function"==typeof t.read?(e=+e,isFinite(e)?Promise.resolve(new $(t,e)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var s}}]),t}();function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function et(t,e){return(et=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(Ft){return!1}}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function it(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function rt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?it(Object(s),!0).forEach((function(e){at(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):it(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function at(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var lt=rt({},j.defaultOptions,{httpStack:new L,fileReader:new X,urlStorage:M?new T:new D,fingerprint:function(t,e){return Y()?Promise.resolve(function(t,e){var s=t.exif?function(t){var e=0;if(0===t.length)return e;for(var s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e&=e;return e}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",s,e.endpoint].join("/")}(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),ut=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&et(t,e)}(i,t);var e,s,n,o=(e=i,function(){var t,s=ot(e);if(nt()){var n=ot(this).constructor;t=Reflect.construct(s,arguments,n)}else t=s.apply(this,arguments);return st(this,t)});function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q(this,i),e=rt({},lt,{},e),o.call(this,t,e)}return s=i,(n=[{key:"terminate",value:function(t,e,s){return e=rt({},lt,{},e),j.terminate(t,e,s)}}])&&tt(s,n),i}(j),ct=(window,s("X7yx")),dt=s("5dVO"),ht=s("riPR"),_t=s("ZJFI"),pt=s("1vjY"),ft=s("VDsr"),mt=s("fXoL");function bt(t,e){if(1&t&&(mt.Ob(0,"p",27),mt.mc(1),mt.Nb()),2&t){const t=mt.Yb(2).$implicit;mt.Db("hide-me",t.file_size>0)("show-me",t.file_size<=0),mt.Ab(1),mt.oc("CORRUPTED (",t.file_size,")")}}function gt(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-col",24),mt.Wb("click",(function(){mt.gc(t);const e=mt.Yb().$implicit;return mt.Yb(2).ViewVideo(e)})),mt.Ob(1,"ion-row",7),mt.Ob(2,"p",25),mt.mc(3),mt.Nb(),mt.lc(4,bt,2,5,"p",26),mt.Nb(),mt.Nb()}if(2&t){const t=mt.Yb().$implicit;mt.Ab(3),mt.nc(t.question),mt.Ab(1),mt.bc("ngIf",t.file_size<=0)}}function vt(t,e){if(1&t&&(mt.Ob(0,"p",27),mt.mc(1),mt.Nb()),2&t){const t=mt.Yb(2).$implicit;mt.Db("hide-me",t.file_size>0)("show-me",t.file_size<=0),mt.Ab(1),mt.oc("CORRUPTED (",t.file_size,")")}}function yt(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-col",28),mt.Wb("click",(function(){mt.gc(t);const e=mt.Yb().$implicit;return mt.Yb(2).ViewVideo(e)})),mt.Ob(1,"ion-row",7),mt.Ob(2,"p",25),mt.mc(3),mt.Nb(),mt.lc(4,vt,2,5,"p",26),mt.Nb(),mt.Nb()}if(2&t){const t=mt.Yb().$implicit;mt.Ab(3),mt.nc(t.question),mt.Ab(1),mt.bc("ngIf",t.file_size<=0)}}function Ot(t,e){1&t&&mt.Mb(0,"img",29)}function wt(t,e){1&t&&mt.Mb(0,"img",30)}function Rt(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-col",31),mt.Ob(1,"ion-button",32),mt.Wb("click",(function(){mt.gc(t);const e=mt.Yb().$implicit;return mt.Yb(2).reshoot_video_single(e)})),mt.mc(2,"Reshoot"),mt.Nb(),mt.Nb()}}const Pt=function(t){return{"background-color":t}},xt=function(t){return{color:t}};function kt(t,e){if(1&t&&(mt.Ob(0,"ion-row",33),mt.Ob(1,"ion-col",8),mt.Ob(2,"div",34),mt.Mb(3,"div",35),mt.Ob(4,"p",36),mt.mc(5),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb()),2&t){const t=mt.Yb().$implicit,e=mt.Yb(2);mt.Ab(2),mt.bc("ngStyle",mt.dc(8,Pt,t.cont_color)),mt.Ab(1),mt.Cb(e.ProgressClass),mt.kc("width",t.percentage+"%"),mt.bc("ngStyle",mt.dc(10,Pt,t.pbar_color)),mt.Ab(1),mt.bc("ngStyle",mt.dc(12,xt,t.pbfont_color)),mt.Ab(1),mt.nc(t.progressbar_title)}}function Et(t,e){if(1&t&&(mt.Ob(0,"ion-row",33),mt.Ob(1,"ion-col",8),mt.Ob(2,"div",34),mt.Mb(3,"div",35),mt.Ob(4,"p",36),mt.mc(5),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb()),2&t){const t=mt.Yb().$implicit,e=mt.Yb(2);mt.Ab(2),mt.bc("ngStyle",mt.dc(8,Pt,t.cont_color)),mt.Ab(1),mt.Cb(e.ProgressClass),mt.kc("width",t.percentage+"%"),mt.bc("ngStyle",mt.dc(10,Pt,t.pbar_color)),mt.Ab(1),mt.bc("ngStyle",mt.dc(12,xt,t.pbfont_color)),mt.Ab(1),mt.nc(t.progressbar_title)}}function Ct(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-card",16),mt.Ob(1,"ion-row",8),mt.lc(2,gt,5,2,"ion-col",17),mt.lc(3,yt,5,2,"ion-col",18),mt.Ob(4,"ion-col",19),mt.Wb("click",(function(){mt.gc(t);const s=e.$implicit;return mt.Yb(2).ViewVideo(s)})),mt.lc(5,Ot,1,0,"img",20),mt.lc(6,wt,1,0,"img",21),mt.Nb(),mt.lc(7,Rt,3,0,"ion-col",22),mt.Nb(),mt.lc(8,kt,6,14,"ion-row",23),mt.lc(9,Et,6,14,"ion-row",23),mt.Nb()}if(2&t){const t=e.$implicit,s=mt.Yb(2);mt.Ab(1),mt.Db("uploading-video","UPLOADING"==t.current_status),mt.Ab(1),mt.bc("ngIf",!1===s.start_upload),mt.Ab(1),mt.bc("ngIf",!0===s.start_upload),mt.Ab(2),mt.bc("ngIf","PENDING"==t.upload_status),mt.Ab(1),mt.bc("ngIf","DONE"==t.upload_status),mt.Ab(1),mt.bc("ngIf",!1===s.start_upload),mt.Ab(1),mt.bc("ngIf","UPLOADING"==t.current_status&&"Failed..."!==t.progressbar_title),mt.Ab(1),mt.bc("ngIf","Failed..."==t.progressbar_title)}}function St(t,e){if(1&t&&(mt.Ob(0,"ion-content",7),mt.Ob(1,"ion-row",8),mt.Ob(2,"ion-col",8),mt.Ob(3,"p",9),mt.mc(4,"Click on the question to preview your video."),mt.Nb(),mt.Nb(),mt.Nb(),mt.Ob(5,"ion-list",7),mt.lc(6,Ct,10,9,"ion-card",10),mt.Ob(7,"ion-card",11),mt.Ob(8,"ion-row",12),mt.Ob(9,"ion-col",13),mt.Ob(10,"p",14),mt.mc(11,"You are just one step away from your submission."),mt.Nb(),mt.Nb(),mt.Ob(12,"ion-col",13),mt.Ob(13,"ion-row",15),mt.Ob(14,"ion-col",13),mt.Ob(15,"p",9),mt.mc(16),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb()),2&t){const t=mt.Yb();mt.Ab(6),mt.bc("ngForOf",t.assessment_data),mt.Ab(10),mt.pc("You have made ",t.total_attempts," successful attempts for assessment. The maximum attempts allowed for this assessment are ",t.attempts_allowed,".")}}function Ut(t,e){if(1&t&&(mt.Ob(0,"ion-row",42),mt.Ob(1,"ion-col",43),mt.mc(2),mt.Nb(),mt.Nb()),2&t){const t=mt.Yb(2);mt.Ab(1),mt.Cb(t.internet_background),mt.Ab(1),mt.oc(" ",t.internet_text," ")}}function At(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-footer",37),mt.lc(1,Ut,3,3,"ion-row",38),mt.Ob(2,"ion-row",11),mt.Ob(3,"ion-col",39),mt.Ob(4,"ion-button",40),mt.Wb("click",(function(){return mt.gc(t),mt.Yb().upload_videoto_vimeo()})),mt.mc(5," UPLOAD YOUR ASSESSMENT "),mt.Nb(),mt.Nb(),mt.Ob(6,"ion-col",39),mt.Ob(7,"ion-button",41),mt.Wb("click",(function(){return mt.gc(t),mt.Yb().reshoot_video()})),mt.mc(8," RESHOOT VIDEO "),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb()}if(2&t){const t=mt.Yb();mt.Ab(1),mt.bc("ngIf",t.internet_indicator)}}function zt(t,e){if(1&t&&(mt.Ob(0,"ion-row",42),mt.Ob(1,"ion-col",43),mt.mc(2),mt.Nb(),mt.Nb()),2&t){const t=mt.Yb(2);mt.Ab(1),mt.Cb(t.internet_background),mt.Ab(1),mt.oc(" ",t.internet_text," ")}}function jt(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-footer",37),mt.lc(1,zt,3,3,"ion-row",38),mt.Ob(2,"ion-row",11),mt.Ob(3,"ion-col",8),mt.Ob(4,"ion-button",44),mt.Wb("click",(function(){return mt.gc(t),mt.Yb().upload_videoto_vimeo()})),mt.mc(5," UPLOAD YOUR ASSESSMENT "),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb()}if(2&t){const t=mt.Yb();mt.Ab(1),mt.bc("ngIf",t.internet_indicator)}}function Dt(t,e){if(1&t&&(mt.Ob(0,"ion-row",42),mt.Ob(1,"ion-col",43),mt.mc(2),mt.Nb(),mt.Nb()),2&t){const t=mt.Yb(2);mt.Ab(1),mt.Cb(t.internet_background),mt.Ab(1),mt.oc(" ",t.internet_text," ")}}function Nt(t,e){if(1&t){const t=mt.Pb();mt.Ob(0,"ion-footer",37),mt.lc(1,Dt,3,3,"ion-row",38),mt.Ob(2,"ion-row",11),mt.Ob(3,"ion-col",8),mt.Ob(4,"ion-button",44),mt.Wb("click",(function(){return mt.gc(t),mt.Yb().upload_videoto_vimeo()})),mt.mc(5," UPLOAD YOUR ASSESSMENT "),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb()}if(2&t){const t=mt.Yb();mt.Ab(1),mt.bc("ngIf",t.internet_indicator)}}var Mt=function(t){return t[t.Online=0]="Online",t[t.Offline=1]="Offline",t}({});const Tt=[{path:"",component:(()=>{class t{constructor(t,e,s,n,o,i,r,a,l,u,c,d,h,_){this.platform=t,this.alertController=e,this.menu=s,this.navCtrl=n,this.modalCtrl=o,this.file=i,this.transfer=r,this.zone=a,this.http=l,this.events=u,this.ionLoader=c,this.ionAlert=d,this.database=h,this.atom=_,this.btn_isclicked=!1,this.json_profile={user_id:"",company_id:"",company_name:"",first_name:"",last_name:"",fullname:"",email:"",mobile:"",photo:"",co_photo:"",otp_pending:"",otc_pending:"",co_pending:"",token_no:"",payload:"",webauto_login:"",default_dboard_tab:""},this.total_attempts=0,this.attempts_allowed=0,this.assessment_form_submit={action:"submit_assessment_details_ftp",token_no:"",payload:"",assessment_id:"",trans_id:"",question_id:"",video_id:"",video_size:0,video_date:"",addeddate:"",total_question:"",start_time:"",end_time:""},this.assessment_status_form_submit={action:"submit_assessment_status_ftp",token_no:"",payload:"",assessment_id:"",total_question:"",total_uploaded:""},this.assessment_upload_log_form_submit={action:"submit_assessment_upload_log",token_no:"",payload:"",assessment_id:"",trans_id:"",question_id:"",log_status:""},this.assessment_truncate_reshoot_form={action:"submit_truncate_reshoot",token_no:"",payload:"",assessment_id:""},this.assessment_truncate_single_reshoot_form={action:"submit_truncate_single_reshoot",token_no:"",payload:"",assessment_id:"",trans_id:"",question_id:""},this.assessment_attempts_form_submit={action:"submit_assessment_attempts",token_no:"",payload:"",assessment_id:""},this.showPage=!1,this.start_upload=!1,this.openedModals=!1,this.videoCount=0,this.videoTotal=0,this.lock_reshoot_button=!1,this.lock_reshoot_single_button=!1,this.lock_upload_button=!1,this.vimeo_upload_status=[],this.vimeocallback_attempts=0,this.vimeostatus_array=[],this.uploadChain_array=[],this.units=["Bytes","KB","MB","GB","TB","PB"],this.current_video_index=0,this.hideBtnReshoot=!1,this.internet_indicator=!1,this.menu.enable(!0),this.hideBtnReshoot=!1,this.assessment_messages=this.atom.get_assessment_messages(),void 0!==this.assessment_messages&&Object.keys(this.assessment_messages).length>0&&(this.NO_RECORD_FOUND=this.assessment_messages.NO_RECORD_FOUND,this.INTERNET_DISCONNECTED=this.assessment_messages.INTERNET_DISCONNECTED,this.INTERNET_HARDWARE_DISCONNECTED=this.assessment_messages.INTERNET_HARDWARE_DISCONNECTED,this.VIMEO_TRANSCODING_STUCK=this.assessment_messages.VIMEO_TRANSCODING_STUCK,this.VIMEO_CALLBACK_ATTEMPTS=this.assessment_messages.VIMEO_CALLBACK_ATTEMPTS,this.VIMEO_CALLBACK_TIMER=this.assessment_messages.VIMEO_CALLBACK_TIMER,this.PBWRAPPER_BG=this.assessment_messages.PBWRAPPER_BG,this.PBFONT_CLR=this.assessment_messages.PBFONT_CLR,this.PBU_BG=this.assessment_messages.PBU_BG,this.PBC_BG=this.assessment_messages.PBC_BG,this.PBF_BG=this.assessment_messages.PBF_BG,this.PBS_BG=this.assessment_messages.PBS_BG,this.UPLOAD_POPUP_TITLE=this.assessment_messages.UPLOAD_POPUP_TITLE,this.UPLOAD_POPUP_MESSAGE_HEAD=this.assessment_messages.UPLOAD_POPUP_MESSAGE_HEAD,this.UPLOAD_POPUP_MESSAGE_SUB=this.assessment_messages.UPLOAD_POPUP_MESSAGE_SUB,parseInt(this.VIMEO_CALLBACK_TIMER)<=0&&(this.VIMEO_CALLBACK_TIMER=2e4,this.TEMP_VIMEO_CALLBACK_TIMER=2e4))}ionViewDidLeave(){try{this.events.unsubscribe("loginnetwork:online"),this.events.unsubscribe("loginnetwork:offline")}catch(v){}}ionViewWillEnter(){this.platform.ready().then(()=>{try{this.events.unsubscribe("RETRY_UPLOAD")}catch(v){}this.events.subscribe("RETRY_UPLOAD",t=>{this.upload_published||(this.upload_published=!0,this.show_confirmation("Howdy User!",t))})})}ngOnInit(){this.json_navparam=this.atom.navigation_param_get(),void 0!==this.json_navparam&&(this.assessment_detail=this.json_navparam.param_assessment_detail,this.vimeo_credentials=this.json_navparam.param_vimeo_credentials,this.total_attempts=parseFloat(this.json_navparam.param_total_attempts),this.attempts_allowed=parseFloat(this.json_navparam.param_attempts_allowed),this.assessment_id=this.assessment_detail.assessment_id,this.ProgressClass="dcp-loader-green fadein-out",this.showPage=!1,this.start_upload=!1,this.videoCount=0,this.videoTotal=0,this.assessment_form_submit.total_question=this.assessment_detail.total_question,this.assessment_status_form_submit.total_question=this.assessment_detail.total_question,this.assessment_status_form_submit.assessment_id=this.assessment_id,this.assessment_attempts_form_submit.assessment_id=this.assessment_id,this.assessment_truncate_reshoot_form.assessment_id=this.assessment_id,this.assessment_truncate_single_reshoot_form.assessment_id=this.assessment_id,this.assessment_upload_log_form_submit.assessment_id=this.assessment_id,this.lock_reshoot_button=!1,this.lock_reshoot_single_button=!1,this.lock_upload_button=!1,this.upload_published=!1,this.alertPresented=!1,parseFloat(this.assessment_detail.video_uploaded_count)>0&&(this.hideBtnReshoot=!0),this.initializeApp())}initializeApp(){this.platform.ready().then(t=>{this.database.storage_get("device").then(t=>{t.token_no&&t.payload&&(this.json_profile=t,this.assessment_form_submit.token_no=t.token_no,this.assessment_form_submit.payload=t.payload,this.assessment_truncate_reshoot_form.token_no=t.token_no,this.assessment_truncate_reshoot_form.payload=t.payload,this.assessment_truncate_single_reshoot_form.token_no=t.token_no,this.assessment_truncate_single_reshoot_form.payload=t.payload,this.assessment_upload_log_form_submit.token_no=t.token_no,this.assessment_upload_log_form_submit.payload=t.payload,this.assessment_attempts_form_submit.token_no=t.token_no,this.assessment_attempts_form_submit.payload=t.payload,this.assessment_status_form_submit.token_no=t.token_no,this.assessment_status_form_submit.payload=t.payload,this.init_preview())}).catch(t=>{}),window.addEventListener("online",()=>{this.internetStatus=Mt.Online,this.zone.run(()=>{this.internet_background="int-green",this.internet_text="YOU ARE ONLINE"}),this.internet_timer=setTimeout(()=>{this.zone.run(()=>{this.internet_indicator=!1})},1e4)}),window.addEventListener("offline",()=>{this.internetStatus=Mt.Offline,this.zone.run(()=>{this.internet_background="int-red",this.internet_text="YOU ARE OFFLINE",this.internet_indicator=!0})})})}sortby_transid(t){return t.sort((t,e)=>parseFloat(t.trans_id)>parseFloat(e.trans_id)?1:parseFloat(t.trans_id)<parseFloat(e.trans_id)?-1:0)}init_preview(){this.start_upload=!1,this.assessment_data=[],this.database.storage_get("assessment").then(t=>{this.videoTotal=0,t&&Object.keys(t).length>0?(this.videoTotal=Object.keys(t).length,t=this.sortby_transid(t),Object.keys(t).forEach(e=>{if(parseFloat(t[e].user_id)==parseFloat(this.json_profile.user_id)){let s=t[e].video_url,n=t[e].is_uploaded;if(t[e].assessment_id==this.assessment_id&&0==n){let n=t[e];this.database.storage_get(s).then(t=>{n.file_size=parseFloat(t.size)>0?t.size:0}).catch(t=>{n.file_size=0}),this.assessment_data.push(n)}}}),this.showPage=!0):this.showPage=!0}).catch(t=>{this.showPage=!0})}reshoot_video(){return Object(a.a)(this,void 0,void 0,(function*(){let t=this;if(this.lock_reshoot_button);else{this.lock_reshoot_button=!0;const e=yield this.alertController.create({header:"Please Confirm",subHeader:"You are about to go Live. Your previous video will be overwritten!",backdropDismiss:!1,buttons:[{text:"Cancel",role:"no",handler:()=>{this.lock_reshoot_button=!1}},{text:"Reshoot",handler:()=>{this.internetStatus===Mt.Offline?(this.lock_reshoot_button=!1,this.ionAlert.show_alert("Retry","Unable to complete the reshoot process, Please click on RESHOOT VIDEO button again.")):this.atom.http_post(this.assessment_truncate_reshoot_form).subscribe(e=>{if(1==e.success){let e=[];this.database.storage_get("assessment").then(s=>{if(s&&Object.keys(s).length>0){let n=Promise.resolve();Object.keys(s).forEach(t=>{n=n.then(()=>new Promise((n,o)=>{parseFloat(s[t].user_id)==parseFloat(this.json_profile.user_id)?(this.temp_video_url=s[t].video_url,this.database.storage_remove(this.temp_video_url).then(o=>{this.temp_assessment_id=s[t].assessment_id,this.temp_assessment_id==this.assessment_id||e.push(s[t]),n({status:"SUCCESS"})}).catch(o=>{this.temp_assessment_id=s[t].assessment_id,this.temp_assessment_id==this.assessment_id||e.push(s[t]),n({status:"SUCCESS"})})):(n({status:"SUCCESS"}),e.push(s[t]))}))}),Promise.all([n]).then((function(s){t.database.storage_set("assessment",e).then(e=>{t.lock_reshoot_button=!1,t.atom.navigation_param_set({assessment_detail:t.assessment_detail,vimeo_credentials:t.vimeo_credentials}).subscribe(e=>{t.navCtrl.navigateRoot("/assessment-quiz")},e=>{t.atom.presentToast("Application error, parameter failed to set.")})}).catch(e=>{t.lock_reshoot_button=!1})}))}}).catch(t=>{this.lock_reshoot_button=!1})}else this.lock_reshoot_button=!1,this.ionAlert.show_alert("Retry","Unable to complete the reshoot process, Please click on RESHOOT VIDEO button again.")},t=>{this.lock_reshoot_button=!1},()=>{this.lock_reshoot_button=!1})}}]});yield e.present()}}))}reshoot_video_single(t){return Object(a.a)(this,void 0,void 0,(function*(){if(this.lock_reshoot_single_button);else if(this.lock_reshoot_single_button=!0,this.assessment_truncate_single_reshoot_form.trans_id=t.trans_id,this.assessment_truncate_single_reshoot_form.question_id=t.question_id,""!=t.trans_id&&""!=t.question_id){const t=yield this.alertController.create({header:"Please Confirm",subHeader:"You are about to go Live. Your previous video will be overwritten!",backdropDismiss:!1,buttons:[{text:"Cancel",role:"no",handler:()=>{this.lock_reshoot_single_button=!1}},{text:"Reshoot",handler:()=>{this.internetStatus===Mt.Offline?(this.lock_reshoot_single_button=!1,this.ionAlert.show_alert("Retry","Unable to complete the reshoot process, Please click on RESHOOT VIDEO button again.")):this.atom.http_post(this.assessment_truncate_single_reshoot_form).subscribe(t=>{if(1==t.success){let t=[];this.database.storage_get("assessment").then(e=>{e&&Object.keys(e).length>0&&(Object.keys(e).forEach(s=>{parseFloat(e[s].user_id)==parseFloat(this.json_profile.user_id)?(this.temp_video_url="",this.temp_trans_id="",this.temp_question_id="",this.temp_video_url=e[s].video_url,this.temp_trans_id=e[s].trans_id,this.temp_question_id=e[s].question_id,this.temp_assessment_id=e[s].assessment_id,this.temp_assessment_id==this.assessment_id&&this.temp_trans_id==this.assessment_truncate_single_reshoot_form.trans_id&&this.temp_question_id==this.assessment_truncate_single_reshoot_form.question_id?this.database.storage_remove(this.temp_video_url).then(t=>{}).catch(t=>{this.lock_reshoot_single_button=!1}):t.push(e[s])):t.push(e[s])}),this.database.storage_set("assessment",t).then(t=>{this.lock_reshoot_single_button=!1,this.atom.navigation_param_set({assessment_detail:this.assessment_detail,vimeo_credentials:this.vimeo_credentials}).subscribe(t=>{this.navCtrl.navigateRoot("/assessment-quiz")},t=>{this.atom.presentToast("Application error, parameter failed to set.")})}).catch(t=>{this.lock_reshoot_single_button=!1}))}).catch(t=>{this.lock_reshoot_single_button=!1})}else this.lock_reshoot_single_button=!1,this.ionAlert.show_alert("Retry","Unable to complete the reshoot process, Please click on RESHOOT VIDEO button again.")},t=>{this.lock_reshoot_single_button=!1},()=>{this.lock_reshoot_single_button=!1})}}]});yield t.present()}else this.ionAlert.show_alert("Retry","Transaction Id Or Assessment Question Id is missing.")}))}filterItems(t){return t.filter(t=>"ERROR"===t)}upload_videoto_vimeo(){let t=this;this.vimeostatus_array=[],this.uploadChain_array=[],this.alertPresented=!1,this.upload_published=!1,this.current_video_index=0,this.lock_upload_button||(this.lock_upload_button=!0,this.database.storage_get("assessment").then(e=>{if(e&&Object.keys(e).length>0)if(this.start_upload=!0,this.videoCount=0,this.internetStatus===Mt.Offline)this.lock_reshoot_single_button=!1,this.events.publish("RETRY_UPLOAD",this.INTERNET_DISCONNECTED);else try{let s=Promise.resolve();for(let t=0;t<Object.keys(e).length;t++)s=s.then(()=>new Promise((s,n)=>{let o=e[t].assessment_id;if(parseFloat(e[t].user_id)==parseFloat(this.json_profile.user_id)&&o==this.assessment_id){this.progressCounter=0,this.current_video_index=t,this.assessment_data[t].current_status="UPLOADING",this.assessment_data[t].percentage=0,this.assessment_data[t].progressbar_title="Uploading...",this.assessment_data[t].cont_color=this.PBWRAPPER_BG,this.assessment_data[t].pbar_color=this.PBU_BG,this.assessment_data[t].pbfont_color=this.PBFONT_CLR,this.videoCount=this.videoCount+1;let n=e[t].assessment_id,o=e[t].trans_id,i=e[t].question_id,r=e[t].video_url,a=e[t].addeddate,l=e[t].start_time,u=e[t].end_time;this.database.storage_get(r).then(e=>{this.file_name=r,this.file_size=e.size,this.assessment_form_submit.assessment_id=n,this.assessment_form_submit.trans_id=o,this.assessment_form_submit.question_id=i,this.assessment_form_submit.addeddate=a,this.assessment_form_submit.start_time=l,this.assessment_form_submit.end_time=u,this.internetStatus===Mt.Offline?(this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"})):(this.assessment_upload_log_form_submit.trans_id=o,this.assessment_upload_log_form_submit.question_id=i,this.assessment_upload_log_form_submit.log_status="UPLOADING",this.atom.http_post(this.assessment_upload_log_form_submit).subscribe(e=>{1==e.success?this.init_video_vimeo(t,r,this.file_size).then(t=>{"SUCCESS"===t.status?(this.uploadChain_array[this.current_video_index]="SUCCESS",s({status:"SUCCESS"})):(this.zone.run(()=>{this.assessment_data[this.current_video_index].current_status="",this.assessment_data[this.current_video_index].percentage=100,this.assessment_data[this.current_video_index].progressbar_title="Failed...",this.assessment_data[this.current_video_index].pbar_color=this.PBF_BG}),this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"}))}).catch(()=>{this.zone.run(()=>{this.assessment_data[this.current_video_index].current_status="",this.assessment_data[this.current_video_index].percentage=100,this.assessment_data[this.current_video_index].progressbar_title="Failed...",this.assessment_data[this.current_video_index].pbar_color=this.PBF_BG}),this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"})}):(this.zone.run(()=>{this.assessment_data[this.current_video_index].current_status="",this.assessment_data[this.current_video_index].percentage=100,this.assessment_data[this.current_video_index].progressbar_title="Failed...",this.assessment_data[this.current_video_index].pbar_color=this.PBF_BG}),this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"}))},t=>{this.zone.run(()=>{this.assessment_data[this.current_video_index].current_status="",this.assessment_data[this.current_video_index].percentage=100,this.assessment_data[this.current_video_index].progressbar_title="Failed...",this.assessment_data[this.current_video_index].pbar_color=this.PBF_BG}),this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"})},()=>{}))}).catch(t=>{this.zone.run(()=>{this.assessment_data[this.current_video_index].current_status="",this.assessment_data[this.current_video_index].percentage=100,this.assessment_data[this.current_video_index].progressbar_title="Failed...",this.assessment_data[this.current_video_index].pbar_color=this.PBF_BG}),this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"})})}else this.uploadChain_array[this.current_video_index]="ERROR",s({status:"ERROR"})}));Promise.all([s]).then((function(e){if(Object.keys(t.filterItems(t.uploadChain_array)).length>0)t.lock_upload_button=!1,t.events.publish("RETRY_UPLOAD",t.VIMEO_TRANSCODING_STUCK);else{let e=[];t.database.storage_get("assessment").then(s=>{s&&Object.keys(s).length>0&&(Object.keys(s).forEach(n=>{parseFloat(s[n].user_id)==parseFloat(t.json_profile.user_id)&&(t.temp_video_url=s[n].video_url,t.database.storage_remove(t.temp_video_url).then(o=>{t.temp_assessment_id=s[n].assessment_id,t.temp_assessment_id==t.assessment_id||e.push(s[n])}).catch(e=>{t.lock_reshoot_button=!1}))}),t.database.storage_set("assessment",e).then(e=>{t.lock_upload_button=!1,t.atom.navigation_param_set({type:"MSG"}).subscribe(e=>{t.navCtrl.navigateRoot("/assessment-success")},e=>{t.atom.presentToast("Application error, parameter failed to set.")})}).catch(e=>{t.lock_upload_button=!1,t.atom.navigation_param_set({type:"MSG"}).subscribe(e=>{t.navCtrl.navigateRoot("/assessment-success")},e=>{t.atom.presentToast("Application error, parameter failed to set.")})}))}).catch(e=>{t.lock_upload_button=!1,t.atom.navigation_param_set({type:"MSG"}).subscribe(e=>{t.navCtrl.navigateRoot("/assessment-success")},e=>{t.atom.presentToast("Application error, parameter failed to set.")})})}}))}catch(v){this.lock_upload_button=!1}}).catch(t=>{this.lock_upload_button=!0}))}upload_video_php(){let t="133_53_20200625170915.mp4",e=this.atom.getapi()+"upload_video";this.database.storage_get(t).then(s=>{let n=new FormData;var o=new Blob([s],{type:"video/mp4"});n.append("file",o,t);let i=new l.d({enctype:"multipart/form-data;","Access-Control-Allow-Origin":"*",Authorization:"bearer "+this.vimeo_credentials.access_token,"Tus-Resumable":"1.0.0","Upload-Offset":s.size,"Content-Transfer-Encoding":"binary"});this.http.post(e,n,{headers:i}).subscribe(t=>{},t=>{},()=>{})}).catch(t=>{})}init_video_vimeo(t,e,s){return Object(a.a)(this,void 0,void 0,(function*(){return new Promise((n,o)=>Object(a.a)(this,void 0,void 0,(function*(){if(this.assessment_form_submit.video_size=s,s>0){let o="https://api.vimeo.com/me/videos",i={upload:{approach:"tus",size:s},name:e,description:"Video Uploaded By "+this.json_profile.fullname+", Company Name "+this.json_profile.company_name,privacy:{comments:"nobody",download:"false",embed:"public",view:"unlisted"},token:this.vimeo_credentials.access_token,client_id:this.vimeo_credentials.client_id,client_secret:this.vimeo_credentials.client_secret},r={headers:new l.d({Authorization:"bearer "+this.vimeo_credentials.access_token,"Content-Type":"application/json",Accept:"application/vnd.vimeo.*+json;version=3.4"})};this.internetStatus===Mt.Offline?n({status:"ERROR"}):yield this.http.post(o,i,r).subscribe(s=>Object(a.a)(this,void 0,void 0,(function*(){let o=s.upload.upload_link;this.assessment_form_submit.video_id=s.uri,yield this.tustransfer_tovimeo(t,o,e).then(t=>Object(a.a)(this,void 0,void 0,(function*(){"UPLOADED"===t.status?n({status:"SUCCESS"}):(this.assessment_upload_log_form_submit.log_status="FAILED",yield this.atom.http_post(this.assessment_upload_log_form_submit).subscribe(t=>{n({status:"ERROR"})},t=>{n({status:"ERROR"})},()=>{}))}))).catch(()=>Object(a.a)(this,void 0,void 0,(function*(){this.assessment_upload_log_form_submit.log_status="FAILED",yield this.atom.http_post(this.assessment_upload_log_form_submit).subscribe(t=>{n({status:"ERROR"})},t=>{n({status:"ERROR"})},()=>{})})))})),t=>{n({status:"ERROR"})},()=>{})}else n({status:"ERROR"})})))}))}filetransfer_tovimeo(t,e,s){let n=this;return new Promise((t,o)=>Object(a.a)(this,void 0,void 0,(function*(){if(this.internetStatus===Mt.Offline)t({status:"ERROR"});else try{this.assessment_data[this.current_video_index].percentage=0,this.assessment_data[this.current_video_index].progressbar_title="Uploading...",this.assessment_data[this.current_video_index].pbar_color=n.PBU_BG,yield this.database.storage_get(s).then(n=>Object(a.a)(this,void 0,void 0,(function*(){let o=yield new FormData;var i=yield new Blob([n],{type:"video/mp4"});o.append("file",i,s);let r=new l.d({});try{yield this.http.put(e,o,{headers:r,observe:"events",responseType:"json",reportProgress:!0}).subscribe(e=>{switch(e.type){case l.c.Sent:case l.c.ResponseHeader:break;case l.c.DownloadProgress:var n=Math.floor(e.loaded/e.total*100);100==n?(this.assessment_data[this.current_video_index].percentage=n,this.assessment_data[this.current_video_index].progressbar_title="Successful..."):n<100&&(this.assessment_data[this.current_video_index].percentage=n);break;case l.c.UploadProgress:this.zone.run(()=>{var t=Math.floor(e.loaded/e.total*100);100==t?(this.assessment_data[this.current_video_index].percentage=t,this.assessment_data[this.current_video_index].progressbar_title="Successful..."):t<100&&(this.assessment_data[this.current_video_index].percentage=t)});break;case l.c.Response:setTimeout(()=>{this.internetStatus===Mt.Offline?t({status:"ERROR"}):this.atom.http_post(this.assessment_form_submit).subscribe(e=>{if(1==e.success){let e=this,n=[],o=[];this.database.storage_get("assessment").then(i=>{if(i&&Object.keys(i).length>0){let r=Promise.resolve();for(let t=0;t<Object.keys(i).length;t++)parseFloat(i[t].user_id)==parseFloat(this.json_profile.user_id)&&(r=r.then(()=>new Promise((e,r)=>{i[t].assessment_id==this.assessment_form_submit.assessment_id&&i[t].trans_id==this.assessment_form_submit.trans_id&&i[t].question_id==this.assessment_form_submit.question_id&&s==i[t].video_url?(i[t].is_uploaded=1,n.push(i[t]),o.push("SUCCESS"),e({status:"SUCCESS"})):(n.push(i[t]),o.push("SUCCESS"),e({status:"SUCCESS"}))})));Promise.all([r]).then((function(s){Object.keys(e.filterItems(o)).length>0?t({status:"ERROR"}):e.database.storage_set("assessment",n).then(s=>{e.zone.run(()=>{e.assessment_data[e.current_video_index].upload_status="DONE",e.assessment_data[e.current_video_index].current_status="DONE",e.assessment_data[e.current_video_index].percentage=100,e.assessment_data[e.current_video_index].progressbar_title="Successful...",e.assessment_data[e.current_video_index].pbar_color=e.PBS_BG}),t({status:"UPLOADED"})}).catch(s=>{t({status:"ERROR"}),e.lock_reshoot_button=!1})}))}}).catch(e=>{t({status:"ERROR"})})}else t({status:"ERROR"})},e=>{t({status:"ERROR"})},()=>{})},1500)}},e=>{t({status:"ERROR"})},()=>{})}catch(a){t({status:"ERROR"})}}))).catch(e=>{t({status:"ERROR"})})}catch(v){t({status:"ERROR"})}})))}tustransfer_tovimeo(t,e,s){let n=this;return new Promise((t,o)=>Object(a.a)(this,void 0,void 0,(function*(){if(this.internetStatus===Mt.Offline)t({status:"ERROR"});else try{this.assessment_data[this.current_video_index].percentage=0,this.assessment_data[this.current_video_index].progressbar_title="Uploading...",this.assessment_data[this.current_video_index].pbar_color=n.PBU_BG,yield this.database.storage_get(s).then(n=>Object(a.a)(this,void 0,void 0,(function*(){let o=yield new FormData;var i=yield new Blob([n],{type:"video/mp4"});o.append("file",i,s),new ut(n,{uploadUrl:e,retryDelays:[0,1e3,3e3,5e3],onError:e=>{t({status:"ERROR"})},onProgress:(t,e)=>{var s=Math.floor(t/e*100);100==s?(this.assessment_data[this.current_video_index].percentage=s,this.assessment_data[this.current_video_index].progressbar_title="Successful..."):s<100&&(this.assessment_data[this.current_video_index].percentage=s)},onSuccess:()=>{setTimeout(()=>{this.internetStatus===Mt.Offline?t({status:"ERROR"}):this.atom.http_post(this.assessment_form_submit).subscribe(e=>{if(1==e.success){let e=this,n=[],o=[];this.database.storage_get("assessment").then(i=>{if(i&&Object.keys(i).length>0){let r=Promise.resolve();for(let t=0;t<Object.keys(i).length;t++)parseFloat(i[t].user_id)==parseFloat(this.json_profile.user_id)&&(r=r.then(()=>new Promise((e,r)=>{i[t].assessment_id==this.assessment_form_submit.assessment_id&&i[t].trans_id==this.assessment_form_submit.trans_id&&i[t].question_id==this.assessment_form_submit.question_id&&s==i[t].video_url?(i[t].is_uploaded=1,n.push(i[t]),o.push("SUCCESS"),e({status:"SUCCESS"})):(n.push(i[t]),o.push("SUCCESS"),e({status:"SUCCESS"}))})));Promise.all([r]).then((function(s){Object.keys(e.filterItems(o)).length>0?t({status:"ERROR"}):e.database.storage_set("assessment",n).then(s=>{e.zone.run(()=>{e.assessment_data[e.current_video_index].upload_status="DONE",e.assessment_data[e.current_video_index].current_status="DONE",e.assessment_data[e.current_video_index].percentage=100,e.assessment_data[e.current_video_index].progressbar_title="Successful...",e.assessment_data[e.current_video_index].pbar_color=e.PBS_BG}),t({status:"UPLOADED"})}).catch(s=>{t({status:"ERROR"}),e.lock_reshoot_button=!1})}))}}).catch(e=>{t({status:"ERROR"})})}else t({status:"ERROR"})},e=>{t({status:"ERROR"})},()=>{})},1500)}}).start()}))).catch(e=>{t({status:"ERROR"})})}catch(v){t({status:"ERROR"})}})))}ViewVideo(t){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.modalCtrl.create({component:ft.a,componentProps:{video_details:t},swipeToClose:!0,presentingElement:yield this.modalCtrl.getTop()});yield e.present(),yield e.onWillDismiss()}))}show_confirmation(t,e){return Object(a.a)(this,void 0,void 0,(function*(){let s;const n=yield this.alertController.create({header:t,subHeader:e,backdropDismiss:!1,buttons:[{text:"Close",handler:()=>{this.init_preview()}}]});return yield n.present(),yield n.onDidDismiss().then(t=>{s=t}),s}))}backto_dashboard(){this.navCtrl.navigateRoot("/go-live/assessment-live")}}return t.\u0275fac=function(e){return new(e||t)(mt.Lb(i.T),mt.Lb(i.b),mt.Lb(i.Q),mt.Lb(i.S),mt.Lb(i.R),mt.Lb(u.a),mt.Lb(c.a),mt.Lb(mt.z),mt.Lb(l.a),mt.Lb(ht.a),mt.Lb(dt.a),mt.Lb(ct.a),mt.Lb(_t.a),mt.Lb(pt.a))},t.\u0275cmp=mt.Fb({type:t,selectors:[["app-assessment-preview"]],decls:12,vars:4,consts:[[1,"ion-no-border","ion-no-shadow"],["slot","start"],["autoHide","false"],[1,"close-containers"],["src","assets/images/close.png","alt","",1,"close-end",3,"click"],["class","ion-no-margin ion-no-padding",4,"ngIf"],["class","ion-no-margin ion-no-padding ion-no-border ion-no-shadow","position","bottom",4,"ngIf"],[1,"ion-no-margin","ion-no-padding"],["size","12","size-sx","12","size-sm","12","size-md","12","size-lg","12","size-xl","12",1,"ion-no-margin","ion-no-padding"],[1,"sub-title"],["lines","none","class","ion-no-margin ion-no-padding shadow-box",4,"ngFor","ngForOf"],["lines","none",1,"ion-no-margin","ion-no-padding"],["lines","none",1,"main-container","ion-text-center"],["size","12","size-sx","12","size-sm","12","size-md","12","size-lg","12","size-xl","12"],[1,"heading"],["lines","none",1,"reshoot-panel"],["lines","none",1,"ion-no-margin","ion-no-padding","shadow-box"],["class","ion-no-margin ion-no-padding","col-8","","col-sm-8","","col-md-8","","col-lg-8","","col-xl-8","",3,"click",4,"ngIf"],["class","ion-no-margin ion-no-padding col-paddings","size","10","size-sx","10","size-sm","10","size-md","10","size-lg","10","size-xl","10",3,"click",4,"ngIf"],["size","2","size-sx","2","size-sm","2","size-md","2","size-lg","2","size-xl","2",1,"ion-no-margin","ion-no-padding","col-paddings","video-img-panel",3,"click"],["src","assets/images/record.png","alt","Awarathon","class","video-img",4,"ngIf"],["src","assets/images/record_done.png","alt","Awarathon","class","video-img",4,"ngIf"],["class","ion-no-margin ion-no-padding col-paddings video-img-panel","size","2","size-sx","2","size-sm","2","size-md","2","size-lg","2","size-xl","2",4,"ngIf"],["class","ion-no-margin ion-no-padding","size","12","size-sx","12","size-sm","12","size-md","12","size-lg","12","size-xl","12","ht20","",4,"ngIf"],["col-8","","col-sm-8","","col-md-8","","col-lg-8","","col-xl-8","",1,"ion-no-margin","ion-no-padding",3,"click"],[1,"video-heading"],["video-size","",3,"hide-me","show-me",4,"ngIf"],["video-size",""],["size","10","size-sx","10","size-sm","10","size-md","10","size-lg","10","size-xl","10",1,"ion-no-margin","ion-no-padding","col-paddings",3,"click"],["src","assets/images/record.png","alt","Awarathon",1,"video-img"],["src","assets/images/record_done.png","alt","Awarathon",1,"video-img"],["size","2","size-sx","2","size-sm","2","size-md","2","size-lg","2","size-xl","2",1,"ion-no-margin","ion-no-padding","col-paddings","video-img-panel"],["size","large","fill","solid","expand","block",1,"btnreshootquiz",3,"click"],["size","12","size-sx","12","size-sm","12","size-md","12","size-lg","12","size-xl","12","ht20","",1,"ion-no-margin","ion-no-padding"],[1,"dcp-wrapper",3,"ngStyle"],[3,"ngStyle"],[1,"percent",3,"ngStyle"],["position","bottom",1,"ion-no-margin","ion-no-padding","ion-no-border","ion-no-shadow"],["class","ion-no-margin ion-no-padding","internet-container","",4,"ngIf"],["col-6","",1,"ion-no-margin","ion-no-padding"],["size","large","fill","solid","expand","block",1,"btnupload",3,"click"],["size","large","fill","solid","expand","block",1,"btnreshoot",3,"click"],["internet-container","",1,"ion-no-margin","ion-no-padding"],["size","12","no-padding","","no-margin","","internet-container",""],["size","large","fill","solid","expand","block",1,"btnuploadfull",3,"click"]],template:function(t,e){1&t&&(mt.Ob(0,"ion-header",0),mt.Ob(1,"ion-toolbar"),mt.Ob(2,"ion-buttons",1),mt.Mb(3,"ion-menu-button",2),mt.Nb(),mt.Ob(4,"ion-title"),mt.mc(5,"Preview Assessment"),mt.Nb(),mt.Ob(6,"div",3),mt.Ob(7,"img",4),mt.Wb("click",(function(){return e.backto_dashboard()})),mt.Nb(),mt.Nb(),mt.Nb(),mt.Nb(),mt.lc(8,St,17,3,"ion-content",5),mt.lc(9,At,9,1,"ion-footer",6),mt.lc(10,jt,6,1,"ion-footer",6),mt.lc(11,Nt,6,1,"ion-footer",6)),2&t&&(mt.Ab(8),mt.bc("ngIf",!0===e.showPage),mt.Ab(1),mt.bc("ngIf",e.total_attempts<e.attempts_allowed&&!0===e.showPage&&!1===e.start_upload&&0==e.hideBtnReshoot),mt.Ab(1),mt.bc("ngIf",e.total_attempts<e.attempts_allowed&&!0===e.showPage&&!1===e.start_upload&&1==e.hideBtnReshoot),mt.Ab(1),mt.bc("ngIf",e.total_attempts>=e.attempts_allowed&&!0===e.showPage&&!1===e.start_upload))},directives:[i.q,i.M,i.i,i.y,i.L,n.i,i.m,i.B,i.l,i.w,n.h,i.j,i.h,n.j,i.o],styles:['ion-menu-button[_ngcontent-%COMP%]{--color:var(--ion-color-primary-contrast)!important}.hide-me[_ngcontent-%COMP%]{display:none}.show-me[_ngcontent-%COMP%]{display:block}.uploading-video[_ngcontent-%COMP%]{background-color:#9adccb}.item-inner[_ngcontent-%COMP%]{padding-right:0!important}ion-label[_ngcontent-%COMP%]{margin:13px 0!important}.col-paddings[_ngcontent-%COMP%]{padding:15px 0}ion-card[_ngcontent-%COMP%]{box-shadow:none!important;width:100%}.main-container[_ngcontent-%COMP%]{height:100%;margin-top:20px;margin-bottom:20px}.center-vertical-horizontal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.button-spinner[_ngcontent-%COMP%]{display:flex}.btnupload[_ngcontent-%COMP%]{padding:0 4px 0 0!important}.btnupload[_ngcontent-%COMP%], .btnuploadfull[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:1.3rem;font-weight:400;text-transform:none;--box-shadow:none;--border-radius:0px;--background:var(--ion-color-primary);--background-focused:var(--ion-color-primary);--background-hover:var(--ion-color-primary);--color:var(--ion-color-primary-contrast);height:45px;margin:0!important}.btnreshootquiz[_ngcontent-%COMP%], .btnuploadfull[_ngcontent-%COMP%]{padding:0!important}.btnreshootquiz[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:1.2rem;font-weight:400;text-transform:none;--box-shadow:none;--border-radius:0px;--background:var(--ion-color-primary);--background-focused:var(--ion-color-primary);--background-hover:var(--ion-color-primary);--color:var(--ion-color-primary-contrast);height:26px;margin:7px 5px 0 0!important}.btnuploadfull[_ngcontent-%COMP%]:hover:not(.disable-hover){background-color:var(--ion-color-primary)!important}.btnreshoot[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:1.3rem;font-weight:400;text-transform:none;--box-shadow:none;--border-radius:0px;--background:var(--ion-color-primary);--background-focused:var(--ion-color-primary);--background-hover:var(--ion-color-primary);--color:var(--ion-color-primary-contrast);height:45px;padding:0!important;margin:0!important}.btnreshoot[_ngcontent-%COMP%]:hover:not(.disable-hover){background-color:#dadada!important}.reshoot-panel[_ngcontent-%COMP%]{align-self:center;align-items:center}.reshoot-panel[_ngcontent-%COMP%], [shadow-box][_ngcontent-%COMP%]{text-align:center;align-content:center}[shadow-box][_ngcontent-%COMP%]{width:100%!important;background-color:#f7f7f7;height:auto!important;border-bottom:1px solid #fff!important;display:inline-block;vertical-align:top;margin-top:2px!important}.video-img[_ngcontent-%COMP%]{-o-object-fit:cover!important;object-fit:cover!important;align-self:center;display:flex;text-align:center;height:40px;width:40px;margin:0 auto}.video-heading[_ngcontent-%COMP%]{min-height:50px;font-size:1.3rem;font-weight:500;color:#393e41;letter-spacing:0;padding:15px 0}.video-heading[_ngcontent-%COMP%], [video-size][_ngcontent-%COMP%]{width:99%;height:auto!important;margin:0 5px 0 15px!important;text-align:justify;white-space:normal}[video-size][_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:#f53d3d;word-break:break-word;word-spacing:normal;min-height:22px;padding:0}.video-author[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:400;color:#393e41;margin:5px 0 0 15px!important}.vscorll[_ngcontent-%COMP%]{height:200px}.scroll-content[_ngcontent-%COMP%]{margin-top:70px;padding:0!important}.heading[_ngcontent-%COMP%]{font-size:1.4rem;line-height:2rem;vertical-align:middle;color:#feffff;margin-bottom:20px!important;background:#54419a;border-radius:7px;min-height:50px;padding:15px 0}.heading[_ngcontent-%COMP%], .sub-title[_ngcontent-%COMP%]{font-weight:700;text-align:center;white-space:normal}.sub-title[_ngcontent-%COMP%]{font-size:1.3rem;line-height:1.6rem;color:#f53d3d;margin:0 auto!important;height:50px;padding:15px}.sub-heading-i[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:500;line-height:22px;color:#3e4d55;text-align:justify;-moz-text-align-last:center;text-align-last:center;margin:10px 0 0}.upload-sub-heading[_ngcontent-%COMP%]{font-size:1.8rem;line-height:1.8rem}.upload-heading[_ngcontent-%COMP%], .upload-sub-heading[_ngcontent-%COMP%]{font-weight:700;text-align:center;vertical-align:middle;color:#47cfad;margin-bottom:20px!important}.upload-heading[_ngcontent-%COMP%]{font-size:2.2rem;line-height:2.2rem}.progress-wrapper[_ngcontent-%COMP%]{margin:0!important;padding:0!important;position:absolute;width:100%!important;background:#e9e9e9!important;float:left}.dcp-wrapper[_ngcontent-%COMP%], .progress-wrapper[_ngcontent-%COMP%], [ht20][_ngcontent-%COMP%]{height:20px!important}.dcp-wrapper[_ngcontent-%COMP%]{position:absolute;width:100%;z-index:0}.percent[_ngcontent-%COMP%]{margin:0 0 2px!important;font-size:1.4rem!important;font-weight:600!important;line-height:1.5!important;z-index:1!important;position:relative!important;text-align:center}.dcp-loader-green[_ngcontent-%COMP%]{margin:0!important;padding:0!important;position:absolute;height:20px!important;float:left;z-index:0}.fadein-out[_ngcontent-%COMP%]{transition:all .1s ease-in-out}.progress-materializecss[_ngcontent-%COMP%]{position:relative;height:4px;display:block;width:100%;background-color:#42e5bd;border-radius:2px;margin:0;overflow:hidden}.progress-materializecss[_ngcontent-%COMP%]   .indeterminate[_ngcontent-%COMP%]{background-color:#0e6751}.progress-materializecss[_ngcontent-%COMP%]   .indeterminate[_ngcontent-%COMP%]:before{-webkit-animation:indeterminate 2.1s cubic-bezier(.65,.815,.735,.395) infinite;animation:indeterminate 2.1s cubic-bezier(.65,.815,.735,.395) infinite}.progress-materializecss[_ngcontent-%COMP%]   .indeterminate[_ngcontent-%COMP%]:after, .progress-materializecss[_ngcontent-%COMP%]   .indeterminate[_ngcontent-%COMP%]:before{content:"";position:absolute;background-color:inherit;top:0;left:0;bottom:0;will-change:left,right}.progress-materializecss[_ngcontent-%COMP%]   .indeterminate[_ngcontent-%COMP%]:after{-webkit-animation:indeterminate-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;animation:indeterminate-short 2.1s cubic-bezier(.165,.84,.44,1) infinite;-webkit-animation-delay:1.15s;animation-delay:1.15s}.close-containers[_ngcontent-%COMP%]{width:100%;top:0}.close-end[_ngcontent-%COMP%]{position:absolute;display:block;height:25px;width:25px;right:10px;top:10px;background:#fff;border-radius:50%;z-index:9999}@-webkit-keyframes indeterminate{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@keyframes indeterminate{0%{left:-35%;right:100%}60%{left:100%;right:-90%}to{left:100%;right:-90%}}@-webkit-keyframes indeterminate-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}@keyframes indeterminate-short{0%{left:-200%;right:100%}60%{left:107%;right:-8%}to{left:107%;right:-8%}}.progress-container[_ngcontent-%COMP%]{width:100%}']}),t})()}];let Bt=(()=>{class t{}return t.\u0275mod=mt.Jb({type:t}),t.\u0275inj=mt.Ib({factory:function(e){return new(e||t)},imports:[[r.i.forChild(Tt)],r.i]}),t})(),It=(()=>{class t{}return t.\u0275mod=mt.Jb({type:t}),t.\u0275inj=mt.Ib({factory:function(e){return new(e||t)},imports:[[n.b,o.f,i.N,Bt]]}),t})()}}]);