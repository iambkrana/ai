function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,o,n){return o&&_defineProperties(e.prototype,o),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{cRhG:function(e,o,n){"use strict";n.r(o),n.d(o,"ProfilePageModule",(function(){return L}));var t=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),l=n("HDdC"),c=n("vkgz"),s=n("JIr8"),f=n("X7yx"),d=n("5dVO"),p=n("riPR"),m=n("ZJFI"),b=n("1vjY"),u=n("fXoL"),g=n("tk/3");function _(e,o){1&e&&(u.Ob(0,"div",26),u.mc(1," PLEASE WAIT\xa0\xa0"),u.Mb(2,"ion-spinner",27),u.Nb())}function h(e,o){1&e&&(u.Ob(0,"div",26),u.mc(1," UPDATE "),u.Nb())}function v(e,o){if(1&e&&(u.Ob(0,"ion-row",28),u.Ob(1,"ion-col",29),u.mc(2),u.Nb(),u.Nb()),2&e){var n=u.Yb();u.Ab(1),u.Cb(n.internet_background),u.Ab(1),u.oc(" ",n.internet_text," ")}}var k,O,y,M=function(e){return e[e.Online=0]="Online",e[e.Offline=1]="Offline",e}({}),C=[{path:"",component:(k=function(){function e(o,n,t,i,a,r,l,c,s,f,d,p){_classCallCheck(this,e),this.platform=o,this.navCtrl=n,this.menu=t,this.zone=i,this.loadingCtrl=a,this.actionSheetCtrl=r,this.http=l,this.events=c,this.ionLoader=s,this.ionAlert=f,this.database=d,this.atom=p,this.btn_isclicked=!1,this.json_profile={user_id:"",company_id:"",company_name:"",first_name:"",last_name:"",fullname:"",email:"",mobile:"",photo:"",co_photo:"",otp_pending:"",otc_pending:"",co_pending:"",token_no:"",payload:"",webauto_login:"",default_dboard_tab:""},this.device_details={app_name:"",package_name:"",version_code:"",version_number:"",cordova:"",model:"",platform:"",uuid:"",imei:"",imsi:"",iccid:"",mac:"",version:"",manufacturer:"",is_virtual:!1,serial:"",memory:0,cpumhz:"",totalstorage:"",registered_account:"",user_agent:""},this.profile_form={action:"update_profile",payload:"",token:"",firstname:"",lastname:"",mobile:"",email:"",password:"",avatar:"",confirmpwd:"",device_info:""},this.avatarThumb="assets/images/camera.png",this.internet_indicator=!1,this.menu.enable(!0),this.initializeApp()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"initializeApp",value:function(){var e=this;this.platform.ready().then((function(o){window.addEventListener("online",(function(){e.internetStatus=M.Online,e.zone.run((function(){e.internet_background="int-green",e.internet_text="YOU ARE ONLINE"})),e.internet_timer=setTimeout((function(){e.zone.run((function(){e.internet_indicator=!1}))}),1e4)})),window.addEventListener("offline",(function(){e.internetStatus=M.Offline,e.zone.run((function(){e.internet_background="int-red",e.internet_text="YOU ARE OFFLINE",e.internet_indicator=!0}))}))})),this.platform.ready().then((function(o){e.database.storage_get("device").then((function(o){o.token_no&&o.payload&&(e.json_profile=o,e.profile_form.payload=o.payload,e.profile_form.token=o.token_no,e.profile_form.firstname=o.first_name,e.profile_form.lastname=o.last_name,e.profile_form.email=o.email,e.profile_form.mobile=o.mobile,e.profile_form.avatar=o.photo)})).catch((function(e){}))}))}},{key:"ionViewWillLeave",value:function(){1==this.action_sheet_status&&this.action_sheet.dismiss()}},{key:"ionViewDidLoad",value:function(){try{this.events.unsubscribe("loginnetwork:online"),this.events.unsubscribe("loginnetwork:offline"),clearTimeout(this.internet_timer)}catch(e){}}},{key:"pathForDefaultImage",value:function(e){return null===e||""===e||void 0===e?this.atom.getImagePath()+"assets/uploads/avatar/no-avatar.jpg":this.atom.getImagePath()+"assets/uploads/avatar/"+e}},{key:"pathForImage",value:function(e){return null===e||""===e?"":cordova.file.dataDirectory+e}},{key:"create_file_name",value:function(e){return(new Date).getTime()+e.substr(e.lastIndexOf("."))}},{key:"change_listener",value:function(e){var o=this;this.ionLoader.showLoader().then((function(){try{if(e.target.files&&e.target.files[0]){var n=new FileReader;n.onload=function(e){o.avatarThumb=e.target.result,o.ionLoader.hideLoader()},n.readAsDataURL(e.target.files[0])}o.file=e.target.files[0];var t=new FormData,i=o.create_file_name(o.file.name);t.append("image",o.file),t.append("file_name",o.create_file_name(i)),t.append("payload",o.profile_form.payload),o.profile_form.avatar=i;var a=o.atom.getapi()+"upload_web";o.http.post(a,t,{}).pipe(Object(c.a)((function(e){o.ionLoader.hideLoader()})),Object(s.a)(o.handleError))}catch(r){}})).catch((function(e){}))}},{key:"handleError",value:function(e){return this.ionLoader.hideLoader(),e.error instanceof ErrorEvent?console.error("A server-side or network error occurred ",e.error.message):console.error("Backend returned code ".concat(e.status,", ")+"body was: ".concat(e.error)),l.a.create((function(e){e.next({success:!1,message:"Server connection failed, Please try again later."}),e.complete()}))}},{key:"update_profile",value:function(e){var o=this;!1===this.btn_isclicked&&(""==this.profile_form.firstname?this.atom.presentToast("First Name Is Required"):""==this.profile_form.lastname?this.atom.presentToast("Last Name Is Required"):""==this.profile_form.mobile?this.atom.presentToast("Mobile Is Required"):10!==this.profile_form.mobile.length?this.atom.presentToast("Mobile number required atleast 10 digit"):""==this.profile_form.email?this.atom.presentToast("Email Address Is Required"):(this.btn_isclicked=!0,e.valid?this.atom.http_post(this.profile_form).subscribe((function(e){1==e.success?(o.ionLoader.hideLoader(),o.btn_isclicked=!1,o.json_profile.user_id=e.user_id,o.json_profile.company_id=e.company_id,o.json_profile.company_name=e.company_name,o.json_profile.first_name=e.firstname,o.json_profile.last_name=e.lastname,o.json_profile.fullname=e.firstname+" "+e.lastname,o.json_profile.email=e.email,o.json_profile.mobile=e.mobile,o.json_profile.photo=e.avatar,o.json_profile.co_photo=e.co_logo,o.json_profile.otp_pending=e.otp_pending,o.json_profile.otc_pending=e.otc_pending,o.json_profile.co_pending=e.co_pending,o.json_profile.token_no=e.token_no,o.json_profile.payload=e.payload,o.json_profile.webauto_login=e.webauto_login,o.atom.setProfile(o.json_profile),o.events.publish("GLOBAL_VAR",o.json_profile),o.atom.presentToast(e.message),o.navCtrl.navigateRoot("/dashboard")):(o.ionLoader.hideLoader(),o.btn_isclicked=!1,o.atom.presentToast(e.message))}),(function(e){o.ionLoader.hideLoader(),o.btn_isclicked=!1,o.atom.presentToast(e)})):(this.btn_isclicked=!1,this.atom.presentToast("Application Error - Form Validate Failed"))))}}]),e}(),k.\u0275fac=function(e){return new(e||k)(u.Lb(a.T),u.Lb(a.S),u.Lb(a.Q),u.Lb(u.z),u.Lb(a.P),u.Lb(a.a),u.Lb(g.a),u.Lb(p.a),u.Lb(d.a),u.Lb(f.a),u.Lb(m.a),u.Lb(b.a))},k.\u0275cmp=u.Fb({type:k,selectors:[["app-profile"]],decls:42,vars:9,consts:[[1,"ion-no-border","ion-no-shadow"],["slot","start"],["autoHide","false"],["padding",""],[1,"profile-section"],["method","post"],["ProfileForm","ngForm"],[1,"avatar-container"],["type","file","accept","image/*","id","file_input_avatar",2,"opacity","0",3,"change"],["alt","",1,"avatar-img",3,"src"],[1,"ion-no-padding","ion-no-margin"],["position","stacked",1,"label"],["type","text","placeholder","","name","firstname","spellcheck","false","autocomplete","off","autocorrect","off","autocomplete","off","autocorrect","off","autocapitalize","off","required","",1,"form-input",3,"ngModel","ngModelChange"],["firstname","ngModel"],["type","text","placeholder","","name","lastname","spellcheck","false","autocomplete","off","autocorrect","off","autocapitalize","off","required","",1,"form-input",3,"ngModel","ngModelChange"],["lastname","ngModel"],["type","tel","placeholder","","name","mobile","spellcheck","false","autocomplete","off","autocorrect","off","autocapitalize","off","minlength","10","maxlength","10","pattern","[0-9]*","required","",1,"form-input",3,"ngModel","ngModelChange"],["mobile","ngModel"],["type","email","placeholder","","name","email","spellcheck","false","autocomplete","off","autocorrect","off","autocapitalize","off","required","",1,"form-input",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"ion-no-padding","continue-padding"],["size","large","fill","solid","expand","block",1,"profile-button",3,"disabled","click"],["class","center-vertical-horizontal",4,"ngIf"],["position","bottom",1,"ion-no-margin","ion-no-padding","ion-no-border","ion-no-shadow"],[1,"ion-no-margin","ion-no-padding"],["class","ion-no-margin ion-no-padding","internet-container","",4,"ngIf"],[1,"center-vertical-horizontal"],[1,"button-spinner"],["internet-container","",1,"ion-no-margin","ion-no-padding"],["size","12","no-padding","","no-margin","","internet-container",""]],template:function(e,o){if(1&e){var n=u.Pb();u.Ob(0,"ion-header",0),u.Ob(1,"ion-toolbar"),u.Ob(2,"ion-buttons",1),u.Mb(3,"ion-back-button",2),u.Nb(),u.Ob(4,"ion-title"),u.mc(5,"Update Profile"),u.Nb(),u.Nb(),u.Nb(),u.Ob(6,"ion-content",3),u.Ob(7,"div",4),u.Ob(8,"form",5,6),u.Ob(10,"ion-list"),u.Ob(11,"div",7),u.Ob(12,"input",8),u.Wb("change",(function(e){return o.change_listener(e)})),u.Nb(),u.Ob(13,"ion-avatar"),u.Mb(14,"img",9),u.Nb(),u.Nb(),u.Ob(15,"ion-item",10),u.Ob(16,"ion-label",11),u.mc(17,"First Name"),u.Nb(),u.Ob(18,"ion-input",12,13),u.Wb("ngModelChange",(function(e){return o.profile_form.firstname=e})),u.Nb(),u.Nb(),u.Ob(20,"ion-item",10),u.Ob(21,"ion-label",11),u.mc(22,"Last Name"),u.Nb(),u.Ob(23,"ion-input",14,15),u.Wb("ngModelChange",(function(e){return o.profile_form.lastname=e})),u.Nb(),u.Nb(),u.Ob(25,"ion-item",10),u.Ob(26,"ion-label",11),u.mc(27,"Mobile No."),u.Nb(),u.Ob(28,"ion-input",16,17),u.Wb("ngModelChange",(function(e){return o.profile_form.mobile=e})),u.Nb(),u.Nb(),u.Ob(30,"ion-item",10),u.Ob(31,"ion-label",11),u.mc(32,"Email Address"),u.Nb(),u.Ob(33,"ion-input",18,19),u.Wb("ngModelChange",(function(e){return o.profile_form.email=e})),u.Nb(),u.Nb(),u.Nb(),u.Ob(35,"div",20),u.Ob(36,"ion-button",21),u.Wb("click",(function(){u.gc(n);var e=u.fc(9);return o.update_profile(e)})),u.lc(37,_,3,0,"div",22),u.lc(38,h,2,0,"div",22),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(39,"ion-footer",23),u.Ob(40,"ion-grid",24),u.lc(41,v,3,3,"ion-row",25),u.Nb(),u.Nb()}2&e&&(u.Ab(14),u.bc("src",o.avatarThumb,u.ic),u.Ab(4),u.bc("ngModel",o.profile_form.firstname),u.Ab(5),u.bc("ngModel",o.profile_form.lastname),u.Ab(5),u.bc("ngModel",o.profile_form.mobile),u.Ab(5),u.bc("ngModel",o.profile_form.email),u.Ab(3),u.bc("disabled",o.btn_isclicked),u.Ab(1),u.bc("ngIf",o.btn_isclicked),u.Ab(1),u.bc("ngIf",!o.btn_isclicked),u.Ab(3),u.bc("ngIf",o.internet_indicator))},directives:[a.q,a.M,a.i,a.e,a.f,a.L,a.m,i.r,i.k,i.l,a.w,a.d,a.u,a.v,a.t,a.W,i.p,i.j,i.m,i.h,i.g,i.n,a.h,t.i,a.o,a.p,a.F,a.B,a.l],styles:["ion-menu-button[_ngcontent-%COMP%]{--color:var(--ion-color-primary-contrast)!important}ion-back-button[_ngcontent-%COMP%]{--color:var(--ion-color-primary-contrast)}.custom-back-button[_ngcontent-%COMP%]{color:#fff;display:inline}.profile-section[_ngcontent-%COMP%]{padding:10px}.continue-padding[_ngcontent-%COMP%]{margin:20px 0 0}.profile-button[_ngcontent-%COMP%]{font-size:1.4rem;text-transform:none;--box-shadow:none;--border-radius:0px;--background:var(--ion-color-primary);--background-focused:var(--ion-color-primary);--background-hover:var(--ion-color-primary);--color:var(--ion-color-primary-contrast)}.form-input[_ngcontent-%COMP%], .profile-button[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:400}.form-input[_ngcontent-%COMP%]{width:100%;height:auto;overflow:hidden;background-color:#f2f4f6;border:none!important;margin:13px 0 0;border-radius:0;-moz-border-radius:0;-o-border-radius:0;-webkit-border-radius:0;font-size:14px;padding:0 5px!important;color:#3e4d55}ion-item[_ngcontent-%COMP%]{padding:0 0 2px;--ion-safe-area-right:0;--background-activated:var(--ion-text-color);--background-focused:var(--ion-text-color);--background-hover:var(--ion-text-color);--highlight-color-focused:none!important}ion-item[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:hover{--color:var(--ion-color-dark-black)}ion-item[_ngcontent-%COMP%]:hover{--border-color:var(--ion-color-input-background);--highlight-color-focused:var(--ion-color-input-background);--background-focused:var(--ion-color-input-background);--background-hover:var(--ion-color-input-background)}ion-label[_ngcontent-%COMP%]{font-family:Roboto,sans-serif!important;font-size:16px!important;font-weight:400!important;line-height:35px!important;--color:var(--ion-color-dark-black)!important}.item-has-focus[_ngcontent-%COMP%]   .label-stacked[_ngcontent-%COMP%]{color:var(--ion-color-dark-black)!important}.avatar-container[_ngcontent-%COMP%]{display:flex;padding-top:13px;text-align:center;border:none!important;height:125px}.avatar-img[_ngcontent-%COMP%], ion-avatar[_ngcontent-%COMP%]{width:100px;height:100px;margin:0 auto}ion-avatar[_ngcontent-%COMP%]{background-color:#f2f4f6}#file_input_avatar[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;width:100%;height:125px;left:0;z-index:999}.button-spinner[_ngcontent-%COMP%]{display:flex}"]}),k)}],w=((y=function e(){_classCallCheck(this,e)}).\u0275mod=u.Jb({type:y}),y.\u0275inj=u.Ib({factory:function(e){return new(e||y)},imports:[[r.i.forChild(C)],r.i]}),y),L=((O=function e(){_classCallCheck(this,e)}).\u0275mod=u.Jb({type:O}),O.\u0275inj=u.Ib({factory:function(e){return new(e||O)},imports:[[t.b,i.f,a.N,w]]}),O)}}]);