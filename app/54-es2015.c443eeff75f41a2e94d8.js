(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{X3zk:function(n,i,t){"use strict";t.r(i),t.d(i,"LoginPageModule",(function(){return k}));var o=t("ofXK"),e=t("3Pt+"),a=t("TEn/"),r=t("tyNb"),s=t("mrSG"),c=t("kwrG"),l=t("1vjY"),d=t("X7yx"),g=t("5dVO"),b=t("riPR"),h=t("ZJFI"),p=t("M39V"),m=t("fXoL");function _(n,i){1&n&&(m.Ob(0,"div",24),m.mc(1," PLEASE WAIT\xa0\xa0"),m.Mb(2,"ion-spinner",25),m.Nb())}function u(n,i){1&n&&(m.Ob(0,"div",24),m.mc(1," SIGN IN "),m.Nb())}function f(n,i){if(1&n&&(m.Ob(0,"ion-row",26),m.Ob(1,"ion-col",27),m.mc(2),m.Nb(),m.Nb()),2&n){const n=m.Yb();m.Ab(1),m.Cb(n.internet_background),m.Ab(1),m.oc(" ",n.internet_text," ")}}var v=function(n){return n[n.Online=0]="Online",n[n.Offline=1]="Offline",n}({});const w=[{path:"",component:(()=>{class n{constructor(n,i,t,o,e,a,r,s,c,l){this.platform=n,this.menu=i,this.navCtrl=t,this.network=o,this.zone=e,this.events=a,this.ionLoader=r,this.ionAlert=s,this.database=c,this.atom=l,this.btn_isclicked=!1,this.internet_indicator=!1,this.login_form={action:"login",email:"",password:"",device_info:""},this.device_details={app_name:"Awarathon",package_name:"com.awarathon.awarathon",version_code:"1",version_number:"1.0",cordova:"",model:"",platform:"Web",uuid:"",imei:"",imsi:"",iccid:"",mac:"",version:"",manufacturer:"",is_virtual:1,serial:"",memory:0,cpumhz:"",totalstorage:"",registered_account:"",user_agent:"",ip_address:"",latitude:"",longitude:"",browser_agent:"",time_open:"",organisation:""},this.json_profile={user_id:"",company_id:"",company_name:"",first_name:"",last_name:"",fullname:"",email:"",mobile:"",photo:"",co_photo:"",otp_pending:"",otc_pending:"",co_pending:"",token_no:"",payload:"",webauto_login:"",default_dboard_tab:""},this.json_useragent="",this.menu.enable(!1),this.initializeApp()}ionViewDidLeave(){try{this.events.unsubscribe("loginnetwork:online"),this.events.unsubscribe("loginnetwork:offline"),clearTimeout(this.internet_timer)}catch(n){}}ngOnInit(){}initializeApp(){this.platform.ready().then(n=>{let i={timeOpened:new Date,timezone:(new Date).getTimezoneOffset()/60,pageon:()=>window.location.pathname,referrer:()=>document.referrer,previousSites(){return this.history.length},browserName:()=>navigator.appName,browserEngine:()=>navigator.product,browserVersion1a:()=>navigator.appVersion,browserVersion1b:()=>navigator.userAgent,browserLanguage:()=>navigator.language,browserOnline:()=>navigator.onLine,browserPlatform:()=>navigator.platform,javaEnabled:()=>navigator.javaEnabled(),dataCookiesEnabled:()=>navigator.cookieEnabled,dataCookies1:()=>document.cookie,dataStorage:()=>localStorage};this.device_details.time_open=i.timeOpened.toString(),this.device_details.version=i.browserVersion1a(),this.device_details.manufacturer=i.browserPlatform(),this.device_details.mac="",this.device_details.browser_agent=i.browserVersion1b(),window.addEventListener("online",()=>{this.internetStatus=v.Online,this.zone.run(()=>{this.internet_background="int-green",this.internet_text="YOU ARE ONLINE"}),this.internet_timer=setTimeout(()=>{this.zone.run(()=>{this.internet_indicator=!1})},1e4)}),window.addEventListener("offline",()=>{this.internetStatus=v.Offline,this.zone.run(()=>{this.internet_background="int-red",this.internet_text="YOU ARE OFFLINE",this.internet_indicator=!0})})})}signin(n){return Object(s.a)(this,void 0,void 0,(function*(){if(!1===this.btn_isclicked){let o=!1;try{if(this.temp_useragent=yield p.parse(window.navigator.userAgent),Object.keys(this.temp_useragent).length>0){var i=yield this.temp_useragent.os.name.toLocaleLowerCase();yield this.temp_useragent.platform.type.toLocaleLowerCase(),yield this.temp_useragent.browser.name.toLocaleLowerCase(),"ios"!=i&&"macos"!=i||(this.json_useragent="ios"),yield this.database.storage_set("useragent",this.json_useragent).then(n=>Object(s.a)(this,void 0,void 0,(function*(){yield this.database.storage_get("useragent").then(n=>{o=!0}).catch(n=>{o=!1})}))).catch(n=>{o=!1})}else o=!1}catch(t){o=!1}0==o?this.atom.presentToast("System parameter missing, Please contact administrator."):""==this.login_form.email?this.atom.presentToast("Email Address Is Required"):""==this.login_form.password?this.atom.presentToast("Password Is Required"):(this.btn_isclicked=!0,n.valid&&this.ionLoader.showLoader().then(()=>{this.login_form.device_info=JSON.stringify(this.device_details),this.atom.http_post(this.login_form).subscribe(n=>{1==n.success?(this.json_profile.user_id=n.user_id,this.json_profile.company_id=n.company_id,this.json_profile.company_name=n.company_name,this.json_profile.first_name=n.firstname,this.json_profile.last_name=n.lastname,this.json_profile.fullname=n.firstname+" "+n.lastname,this.json_profile.email=n.email,this.json_profile.mobile=n.mobile,this.json_profile.photo=n.avatar,this.json_profile.co_photo=n.co_logo,this.json_profile.otp_pending=n.otp_pending,this.json_profile.otc_pending=n.otc_pending,this.json_profile.co_pending=n.co_pending,this.json_profile.token_no=n.token_no,this.json_profile.payload=n.payload,this.json_profile.webauto_login=n.webauto_login,this.json_profile.default_dboard_tab=n.default_dboard_tab,this.atom.setProfile(this.json_profile),this.events.publish("PUBLISH_JSON_PROFILE",this.json_profile),this.database.storage_set("device",this.json_profile).then(i=>{this.database.storage_get("device").then(i=>{i.token_no&&i.payload?(this.database.authentication_set(!0),this.ionLoader.hideLoader(),this.btn_isclicked=!1,1==n.co_pending||""==n.company_id?this.navCtrl.navigateRoot("/verification"):1==n.otp_pending?this.navCtrl.navigateRoot("/otp"):"0"==this.json_profile.default_dboard_tab||0==parseFloat(this.json_profile.default_dboard_tab)?this.navCtrl.navigateRoot("/dashboard/workshop-live"):this.navCtrl.navigateRoot("/go-live/assessment-live")):(this.database.authentication_set(!1),this.btn_isclicked=!1,this.navCtrl.navigateRoot("/login"))}).catch(n=>{this.btn_isclicked=!1})}).catch(n=>{this.btn_isclicked=!1})):(this.ionLoader.hideLoader(),this.btn_isclicked=!1,this.atom.presentToast(n.message))},n=>{this.ionLoader.hideLoader(),this.btn_isclicked=!1},()=>{this.ionLoader.hideLoader(),this.btn_isclicked=!1})}).catch(()=>{this.btn_isclicked=!1}))}}))}route_registration(){this.navCtrl.navigateForward("/registration")}route_forgot(){this.navCtrl.navigateForward("/forgot")}}return n.\u0275fac=function(i){return new(i||n)(m.Lb(a.T),m.Lb(a.Q),m.Lb(a.S),m.Lb(c.a),m.Lb(m.z),m.Lb(b.a),m.Lb(g.a),m.Lb(d.a),m.Lb(h.a),m.Lb(l.a))},n.\u0275cmp=m.Fb({type:n,selectors:[["app-login"]],decls:35,vars:6,consts:[["slot","fixed"],[1,"form"],[1,"ion-justify-content-center"],["size-md","12","size-lg","12","size-xs","12",1,"ion-align-self-center"],[1,"ion-padding"],["alt","","src","assets/images/logo.png",1,"logo-img"],["size-md","6","size-lg","5","size-xs","12",1,"ion-align-self-start"],["method","post"],["LoginForm","ngForm"],["position","stacked"],["type","email","name","email","placeholder","Your email address","minlength","0","maxlength","255","value","","spellcheck","false","autocapitalize","off","required","",3,"ngModel","ngModelChange"],["email","ngModel"],["type","password","name","password","placeholder","","minlength","0","maxlength","20","value","","spellcheck","false","autocapitalize","off","required","",3,"ngModel","ngModelChange","keyup.enter"],["password","ngModel"],[1,"ion-padding","continue-padding"],["size","large","fill","solid","expand","block",1,"login-button",3,"disabled","click"],["class","center-vertical-horizontal",4,"ngIf"],["position","bottom",1,"ion-no-margin","ion-no-padding","ion-no-border","ion-no-shadow"],[1,"ion-no-margin","ion-no-padding"],["class","ion-no-margin ion-no-padding","internet-container","",4,"ngIf"],[1,"no-padding","no-margin"],["col-6","",1,"btn-registration",3,"click"],[1,"normal-text","disabled-text"],["col-6","",1,"btn-signin",3,"click"],[1,"center-vertical-horizontal"],[1,"button-spinner"],["internet-container","",1,"ion-no-margin","ion-no-padding"],["size","12","no-padding","","no-margin","","internet-container",""]],template:function(n,i){if(1&n){const n=m.Pb();m.Ob(0,"ion-content",0),m.Ob(1,"ion-grid",1),m.Ob(2,"ion-row",2),m.Ob(3,"ion-col",3),m.Ob(4,"div",4),m.Mb(5,"ion-img",5),m.Nb(),m.Nb(),m.Ob(6,"ion-col",6),m.Ob(7,"form",7,8),m.Ob(9,"div",4),m.Ob(10,"ion-label",9),m.mc(11,"Email Address"),m.Nb(),m.Ob(12,"ion-item"),m.Ob(13,"ion-input",10,11),m.Wb("ngModelChange",(function(n){return i.login_form.email=n})),m.Nb(),m.Nb(),m.Nb(),m.Ob(15,"div",4),m.Ob(16,"ion-label",9),m.mc(17,"Password"),m.Nb(),m.Ob(18,"ion-item"),m.Ob(19,"ion-input",12,13),m.Wb("ngModelChange",(function(n){return i.login_form.password=n}))("keyup.enter",(function(){m.gc(n);const t=m.fc(8);return i.signin(t)})),m.Nb(),m.Nb(),m.Nb(),m.Ob(21,"div",14),m.Ob(22,"ion-button",15),m.Wb("click",(function(){m.gc(n);const t=m.fc(8);return i.signin(t)})),m.lc(23,_,3,0,"div",16),m.lc(24,u,2,0,"div",16),m.Nb(),m.Nb(),m.Nb(),m.Nb(),m.Nb(),m.Nb(),m.Nb(),m.Ob(25,"ion-footer",17),m.Ob(26,"ion-grid",18),m.lc(27,f,3,3,"ion-row",19),m.Ob(28,"ion-row",20),m.Ob(29,"ion-col",21),m.Wb("click",(function(){return i.route_registration()})),m.Ob(30,"a",22),m.mc(31,"Create Account"),m.Nb(),m.Nb(),m.Ob(32,"ion-col",23),m.Wb("click",(function(){return i.route_forgot()})),m.Ob(33,"a",22),m.mc(34,"Forgot Password?"),m.Nb(),m.Nb(),m.Nb(),m.Nb(),m.Nb()}2&n&&(m.Ab(13),m.bc("ngModel",i.login_form.email),m.Ab(6),m.bc("ngModel",i.login_form.password),m.Ab(3),m.bc("disabled",i.btn_isclicked),m.Ab(1),m.bc("ngIf",i.btn_isclicked),m.Ab(1),m.bc("ngIf",!i.btn_isclicked),m.Ab(3),m.bc("ngIf",i.internet_indicator))},directives:[a.m,a.p,a.B,a.l,a.s,e.r,e.k,e.l,a.v,a.u,a.t,a.W,e.h,e.g,e.p,e.j,e.m,a.h,o.i,a.o,a.F],styles:["ion-content[_ngcontent-%COMP%]{--overflow:hidden}ion-grid[_ngcontent-%COMP%]{width:100%;background:var(--ion-color-primary-contrast)}ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{height:100%}ion-col[_ngcontent-%COMP%]{background:#fff}ion-label[_ngcontent-%COMP%]{font-family:Roboto!important;font-size:14px;font-weight:400;line-height:35px;color:#232323!important}ion-item[_ngcontent-%COMP%]{--background:var(--ion-color-input-background);--background-activated:var(--ion-color-input-background);--border-radius:2px;--color:#232323;--highlight-color-valid:var(--ion-color-success);--highlight-color-invalid:var(--ion-color-danger);--min-height:40px}ion-item[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]:hover{--highlight-color-focused:var(--ion-color-input-background);--background-focused:var(--ion-color-input-background);--background-hover:var(--ion-color-input-background);--border-color:var(--ion-color-input-background)}.continue-padding[_ngcontent-%COMP%]{padding-top:0}.login-button[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:1.4rem;font-weight:400;text-transform:none;--box-shadow:none;--border-radius:0px;--background:var(--ion-color-primary);--background-focused:var(--ion-color-primary);--background-hover:var(--ion-color-primary);--color:var(--ion-color-primary-contrast)}.btn-registration[_ngcontent-%COMP%]{height:5rem;padding-top:15px;background-color:#92949c}.btn-signin[_ngcontent-%COMP%]{height:5rem;padding-top:15px;background-color:#54419a}.disabled-text[_ngcontent-%COMP%]{color:#fff}.normal-text[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;text-align:center;display:block}.logo-img[_ngcontent-%COMP%]{width:241px;height:auto;margin:0 auto}.center-vertical-horizontal[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.button-spinner[_ngcontent-%COMP%]{display:flex}"]}),n})()}];let O=(()=>{class n{}return n.\u0275mod=m.Jb({type:n}),n.\u0275inj=m.Ib({factory:function(i){return new(i||n)},imports:[[r.i.forChild(w)],r.i]}),n})(),k=(()=>{class n{}return n.\u0275mod=m.Jb({type:n}),n.\u0275inj=m.Ib({factory:function(i){return new(i||n)},imports:[[o.b,e.f,a.N,O]]}),n})()}}]);